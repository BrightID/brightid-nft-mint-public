{"version":3,"sources":["reportWebVitals.js","logo.png","components/react-brightid-nft-mint/src/google-play.png","components/react-brightid-nft-mint/src/open-achievements-ss.png","components/react-brightid-nft-mint/src/is-verified-ss.png","components/react-brightid-nft-mint/src/DeepLinker.js","components/react-brightid-nft-mint/src/BrightIDNftMint.js","components/react-brightid-nft-mint/src/app-store.png","AppMint.js","index.js","components/react-brightid-nft-mint/src/BrightIDNftMintModel.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","DeepLinker","registration","options","Error","hasFocus","didHide","onBlur","onVisibilityChange","e","target","visibilityState","onFocus","onReturn","onFallback","setTimeout","bindEvents","mode","window","document","forEach","conf","this","destroy","bind","openURL","url","onIgnored","location","changePollingInterval","BrightIDNftMint","context","contractAddr","mainnetRpcUrl","walletConnectInfuraId","relayBindURL","relayMintURL","maxSupply","appStoreAndroid","appStoreIos","brightIdMeetUrl","deepLinkPrefix","mintTokenFaucetUrl","mintChainId","mintChainName","mintTokenName","mintTokenDecimal","mintBlockExplorerUrl","mintBlockExplorerTxnPath","mintRpcUrl","verificationUrl","statePrefix","firstUpdate","useRef","useState","allowBindRetry","setAllowBindRetry","allowMode","setAllowMode","setMode","uuidHex","setUUIDHex","walletAddress","setWalletAddress","ensName","setENSName","chainId","setChainId","remainingSupply","setRemainingSupply","remainingSupplyChecked","setRemainingSupplyChecked","gasBalance","setGasBalance","setAlreadyHoldsToken","canAutoSwitchNetworks","setCanAutoSwitchNetworks","qrCodeUUIDUrl","setQrCodeUUIDUrl","isUUIDLinked","setIsUUIDLinked","isUUIDSigned","setIsUUIDSigned","isBoundViaContract","setIsBoundViaContract","isMintedViaContract","setIsMintedViaContract","stepConnectWalletError","setStepConnectWalletError","stepSignUUIDError","setStepSignUUIDError","stepBindViaRelayStatus","setStepBindViaRelayStatus","stepBindViaRelayError","setStepBindViaRelayError","stepMintViaRelayStatus","setStepMintViaRelayStatus","stepMintViaRelayError","setStepMintViaRelayError","linkUUIDToBrightIDError","setLinkUUIDToBrightIDError","stepSwitchToMintNetworkError","setStepSwitchToMintNetworkError","stepBoundViaContractError","setStepBoundViaContractError","isBoundViaContractTxnProcessing","setIsBoundViaContractTxnProcessing","isBoundViaContractTxnId","setIsBoundViaContractTxnId","stepMintedViaContractError","setStepMintedViaContractError","isMintedViaContractTxnProcessing","setIsMintedViaContractTxnProcessing","isMintedViaContractTxnId","setIsMintedViaContractTxnId","stepSignUUIDProcessing","setStepSignUUIDProcessing","stepBindViaRelayProcessing","setStepBindViaRelayProcessing","boundViaContractChecking","setBoundViaContractChecking","stepMintViaRelayProcessing","setStepMintViaRelayProcessing","onAccountDisconnect","a","resetWalletData","onAccountChange","initAllowMode","checkIfAlreadyHoldsNFT","initUUID","initUUIDHex","initWalletAddress","initENSName","initChainId","initGasBalance","initCanAutoSwitchNetworks","initQrCodeUUIDUrl","initIsUUIDLinked","initIsUUIDSigned","initIsBoundViaContract","initIsMintedViaContract","onChainChanged","onChangePolling","hasReachedMaxSupply","initTotalSupply","removeEvents","console","log","web3Instance","removeListener","clearInterval","addEvents","on","setInterval","queryTokenBalance","tokenBalance","uuid","totalSupply","Number","getQrCodeUUIDUrl","initRegistration","BrightIDNftMintModel","reconnectWallet","setModeGas","hasReconnectableWallet","connectWallet","message","chooseWallet","open","switchToMintNetwork","code","addMintNetwork","switchToMainnetNetwork","signBindParams","error","errorMessage","getSignErrorMessage","handleUUIDAlreadyBoundError","getBindErrorMessage","bindViaTransaction","isRetry","tx","hash","wait","receipt","blockNumber","status","getIsUUIDAlreadyBoundError","bindViaRelay","response","ok","json","body","mintViaTransaction","getMintErrorMessage","getIsUUIDUnboundError","mintViaRelay","changeMode","sessionStorage","setItem","hasRelay","hasSwitchedToMintNetwork","hasModeSelected","stepConnectWalletComplete","getStepCompleteString","stepSwitchToMintNetworkComplete","stepObtainGasTokensComplete","stepSignUUIDComplete","stepUUIDLinkedComplete","stepBindViaRelayComplete","stepMintViaRelayComplete","getStepActiveString","stepObtainGasTokensActive","stepSignUUIDActive","stepBindViaRelayActive","stepUUIDLinkedActive","useEffect","current","init","className","href","rel","src","googlePlay","alt","onClick","openAchievementsSS","isVerifiedSS","faucetClaim","signUUID","disabled","linkUUIDToBrightID","renderAs","size","value","AppMint","logo","ReactDOM","render","StrictMode","path","element","getElementById","contractAbi","type","stateMutability","inputs","name","internalType","indexed","anonymous","outputs","brightIDLinkedWallets","isBrightIDLinked","bindParams","web3Modal","providerOptions","walletconnect","package","WalletConnectProvider","infuraId","rpc","Web3Modal","network","cacheProvider","initWeb3Modal","connect","clearCachedProvider","localStorage","removeItem","initInstance","ethers","providers","Web3Provider","JsonRpcProvider","getRegistrationProvider","provider","Contract","getSigner","getProvider","JSON","parse","getItem","getProviderType","queryWalletAddress","getWalletAddress","addr","listAccounts","accounts","length","getMainnetProvider","lookupAddress","getNetwork","getBalance","balanceRaw","utils","formatEther","balanceFormatted","parseFloat","getRegistrationProviderContract","contract","totalSupplyDecimal","toString","contextId","userVerificationUrl","request","Request","method","headers","fetch","responseJson","data","contextIds","toLowerCase","balanceOf","balance","queryENSName","queryChainId","queryGasBalance","queryTotalSupply","getCachedUUID","bindParamJson","stringify","paramsString","getCachedSignedUUID","params","uuidHash","nonce","signature","hasUUID","hasSignedUUID","hashUUID","getBindParams","getContract","filter","filters","AddressBound","fromBlock","toBlock","abi","iface","Interface","getLogs","logs","logsReversed","reverse","getTransactionReceipt","transactionHash","getTransaction","txn","parsed","parseTransaction","args","resetAndInitNewUUID","restoreUUID","restoreCachedUUID","restoreCachedSignedUUID","removeCachedUUID","removeCachedSignedUUID","generateUUID","setCachedUUID","resetUUID","initNewUUID","BigNumber","from","randomBytes","toHexString","replaceAll","str","Buffer","uuidByte32","strToByte32","queryBrightIDLink","hasBoundUUID","initFreshInstance","mintHexChainId","hexlify","chainName","nativeCurrency","symbol","decimals","rpcUrls","blockExplorerUrls","slice","nonceBytes","readUIntBE","getUUIDHash","hashToSign","bytesDataHash","arrayify","signMessage","rawSignature","standardizeSignature","setCachedSignedUUID","queryBrightIDSignature","verificationData","timestamp","v","sig","r","s","contextIdsByte32","map","Transfer","lastLog","pop","tokenIdHex","topics","tokenId","parseInt","rescueFrom","getTokenId","getContractRw","getMintParams","mintParams","mint","getRescueParams","rescueParams","getMintRelayParams","getErrorMessage","decodeErrorMessage","errorCode","toUtf8String","includes"],"mappings":"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","file":"static/js/main.f5736ed8.chunk.js","sourcesContent":["const reportWebVitals = (onPerfEntry) => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import(\"web-vitals\").then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry);\n                getFID(onPerfEntry);\n                getFCP(onPerfEntry);\n                getLCP(onPerfEntry);\n                getTTFB(onPerfEntry);\n            }\n        );\n    }\n};\n\nexport default reportWebVitals;\n","export default __webpack_public_path__ + \"static/media/logo.b1016540.png\";","export default __webpack_public_path__ + \"static/media/google-play.841fe8b4.png\";","export default __webpack_public_path__ + \"static/media/open-achievements-ss.e373cd17.png\";","export default __webpack_public_path__ + \"static/media/is-verified-ss.3e77ab12.png\";","// https://gist.github.com/diachedelic/0d60233dab3dcae3215da8a4dfdcd434\n\nfunction DeepLinker(options) {\n    if (!options) {\n        throw new Error(\"no options\");\n    }\n\n    var hasFocus = true;\n    var didHide = false;\n\n    // window is blurred when dialogs are shown\n    function onBlur() {\n        hasFocus = false;\n    }\n\n    // document is hidden when native app is shown or browser is backgrounded\n    function onVisibilityChange(e) {\n        if (e.target.visibilityState === \"hidden\") {\n            didHide = true;\n        }\n    }\n\n    // window is focused when dialogs are hidden, or browser comes into view\n    function onFocus() {\n        if (didHide) {\n            if (options.onReturn) {\n                options.onReturn();\n            }\n\n            didHide = false; // reset\n        } else {\n            // ignore duplicate focus event when returning from native app on\n            // iOS Safari 13.3+\n            if (!hasFocus && options.onFallback) {\n                // wait for app switch transition to fully complete - only then is\n                // 'visibilitychange' fired\n                setTimeout(function () {\n                    // if browser was not hidden, the deep link failed\n                    if (!didHide) {\n                        options.onFallback();\n                    }\n                }, 1000);\n            }\n        }\n\n        hasFocus = true;\n    }\n\n    // add/remove event listeners\n    // `mode` can be \"add\" or \"remove\"\n    function bindEvents(mode) {\n        [\n            [window, \"blur\", onBlur],\n            [document, \"visibilitychange\", onVisibilityChange],\n            [window, \"focus\", onFocus],\n        ].forEach(function (conf) {\n            conf[0][mode + \"EventListener\"](conf[1], conf[2]);\n        });\n    }\n\n    // add event listeners\n    bindEvents(\"add\");\n\n    // expose public API\n    this.destroy = bindEvents.bind(null, \"remove\");\n    this.openURL = function (url) {\n        // it can take a while for the dialog to appear\n        var dialogTimeout = 500;\n\n        setTimeout(function () {\n            if (hasFocus && options.onIgnored) {\n                options.onIgnored();\n            }\n        }, dialogTimeout);\n\n        window.location = url;\n    };\n}\n\nexport default DeepLinker;\n","import googlePlay from \"./google-play.png\";\nimport appStore from \"./app-store.png\";\nimport openAchievementsSS from \"./open-achievements-ss.png\";\nimport isVerifiedSS from \"./is-verified-ss.png\";\nimport \"./BrightIDNftMint.css\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport QRCode from \"qrcode.react\";\nimport BrightIDNftMintModel from \"./BrightIDNftMintModel\";\nimport DeepLinker from \"./DeepLinker\";\n\nlet registration;\n\nlet changePollingInterval = 0;\n\nfunction BrightIDNftMint({\n    context = \"\",\n    contractAddr = \"\",\n    mainnetRpcUrl = \"\",\n    walletConnectInfuraId = \"\",\n    relayBindURL = \"\",\n    relayMintURL = \"\",\n    maxSupply = 0,\n    appStoreAndroid = \"https://play.google.com/store/apps/details?id=org.brightid\",\n    appStoreIos = \"https://apps.apple.com/us/app/brightid/id1428946820\",\n    brightIdMeetUrl = \"https://meet.brightid.org\",\n    deepLinkPrefix = \"brightid://link-verification/http:%2f%2fnode.brightid.org\",\n    mintTokenFaucetUrl = \"https://www.gimlu.com/faucet\",\n    mintChainId = 100,\n    mintChainName = \"Gnosis Chain (formerly xDai)\",\n    mintTokenName = \"xDAI\",\n    mintTokenDecimal = 18,\n    mintBlockExplorerUrl = \"https://blockscout.com/xdai/mainnet\",\n    mintBlockExplorerTxnPath = \"/tx/\",\n    mintRpcUrl = \"https://rpc.gnosischain.com\",\n    verificationUrl = \"https://app.brightid.org/node/v5/verifications\",\n}) {\n    /* State */\n    /* ---------------------------------------------------------------------- */\n\n    const statePrefix = \"brightid-nft-mint\";\n\n    const firstUpdate = useRef(true);\n\n    const [allowBindRetry, setAllowBindRetry] = useState(false);\n\n    const [allowMode, setAllowMode] = useState(false);\n\n    const [mode, setMode] = useState(\"\");\n\n    const [uuidHex, setUUIDHex] = useState(\"\");\n\n    const [walletAddress, setWalletAddress] = useState(\"\");\n\n    const [ensName, setENSName] = useState(\"\");\n\n    const [chainId, setChainId] = useState(\"\");\n\n    // const [totalSupply, setTotalSupply] = useState(0);\n\n    const [remainingSupply, setRemainingSupply] = useState(0);\n\n    const [remainingSupplyChecked, setRemainingSupplyChecked] = useState(false);\n\n    const [gasBalance, setGasBalance] = useState(0.0);\n\n    const [alreadyHoldsToken, setAlreadyHoldsToken] = useState(false);\n\n    const [canAutoSwitchNetworks, setCanAutoSwitchNetworks] = useState(false);\n\n    const [qrCodeUUIDUrl, setQrCodeUUIDUrl] = useState(\"\");\n\n    const [isUUIDLinked, setIsUUIDLinked] = useState(false);\n\n    const [isUUIDSigned, setIsUUIDSigned] = useState(false);\n\n    const [isBoundViaContract, setIsBoundViaContract] = useState(false);\n\n    const [isMintedViaContract, setIsMintedViaContract] = useState(false);\n\n    const [stepConnectWalletError, setStepConnectWalletError] = useState(\"\");\n\n    const [stepSignUUIDError, setStepSignUUIDError] = useState(\"\");\n\n    const [stepBindViaRelayStatus, setStepBindViaRelayStatus] = useState(\"\");\n\n    const [stepBindViaRelayError, setStepBindViaRelayError] = useState(\"\");\n\n    const [stepMintViaRelayStatus, setStepMintViaRelayStatus] = useState(\"\");\n\n    const [stepMintViaRelayError, setStepMintViaRelayError] = useState(\"\");\n\n    const [linkUUIDToBrightIDError, setLinkUUIDToBrightIDError] = useState(\"\");\n\n    const [stepSwitchToMintNetworkError, setStepSwitchToMintNetworkError] =\n        useState(\"\");\n\n    const [stepBoundViaContractError, setStepBoundViaContractError] =\n        useState(\"\");\n\n    const [\n        isBoundViaContractTxnProcessing,\n        setIsBoundViaContractTxnProcessing,\n    ] = useState(false);\n\n    const [isBoundViaContractTxnId, setIsBoundViaContractTxnId] =\n        useState(null);\n\n    const [stepMintedViaContractError, setStepMintedViaContractError] =\n        useState(\"\");\n\n    const [\n        isMintedViaContractTxnProcessing,\n        setIsMintedViaContractTxnProcessing,\n    ] = useState(false);\n\n    const [isMintedViaContractTxnId, setIsMintedViaContractTxnId] =\n        useState(null);\n\n    const [stepSignUUIDProcessing, setStepSignUUIDProcessing] = useState(false);\n\n    const [stepBindViaRelayProcessing, setStepBindViaRelayProcessing] =\n        useState(false);\n\n    const [boundViaContractChecking, setBoundViaContractChecking] =\n        useState(false);\n\n    const [stepMintViaRelayProcessing, setStepMintViaRelayProcessing] =\n        useState(false);\n\n    /* Web3 Data Init & Monitoring */\n    /* ---------------------------------------------------------------------- */\n\n    async function onAccountDisconnect() {\n        resetWalletData();\n        setMode(\"\");\n        setAllowMode(false);\n        setUUIDHex(\"\");\n        setWalletAddress(\"\");\n        setENSName(\"\");\n        setChainId(\"\");\n        setGasBalance(\"\");\n        setCanAutoSwitchNetworks(\"\");\n        setQrCodeUUIDUrl(\"\");\n        setIsUUIDLinked(\"\");\n        setIsUUIDSigned(false);\n        setIsBoundViaContract(false);\n        setIsMintedViaContract(false);\n    }\n\n    async function onAccountChange() {\n        resetWalletData();\n        initAllowMode();\n        await checkIfAlreadyHoldsNFT();\n        await registration.initUUID();\n        initUUIDHex();\n        initWalletAddress();\n        initENSName();\n        initChainId();\n        initGasBalance();\n        initCanAutoSwitchNetworks();\n        initQrCodeUUIDUrl();\n        initIsUUIDLinked();\n        initIsUUIDSigned();\n        initIsBoundViaContract();\n        initIsMintedViaContract();\n    }\n\n    function onChainChanged() {\n        initChainId();\n    }\n\n    function onChangePolling() {\n        if (registration.gasBalance === 0 || registration.gasBalance === 0.0) {\n            initGasBalance();\n        }\n\n        // if (registration.isBoundViaContract === false) {\n        //     initIsBoundViaContract();\n        // }\n\n        if (\n            registration.isBoundViaContract === true &&\n            registration.isUUIDLinked === false\n        ) {\n            initIsUUIDLinked();\n        }\n\n        if (registration.isMintedViaContract === false) {\n            initIsMintedViaContract();\n        }\n\n        if (hasReachedMaxSupply() === false) {\n            initTotalSupply();\n        }\n    }\n\n    function removeEvents() {\n        console.log(\"remove events\");\n\n        if (typeof registration.web3Instance === \"object\") {\n            registration.web3Instance.removeListener(\n                \"accountsChanged\",\n                onAccountChange\n            );\n\n            registration.web3Instance.removeListener(\n                \"chainChanged\",\n                onChainChanged\n            );\n        }\n\n        if (changePollingInterval) {\n            clearInterval(changePollingInterval);\n        }\n    }\n\n    function addEvents() {\n        console.log(\"add events\");\n\n        if (typeof registration.web3Instance === \"object\") {\n            registration.web3Instance.on(\"accountsChanged\", onAccountChange);\n\n            registration.web3Instance.on(\"chainChanged\", onChainChanged);\n        }\n\n        changePollingInterval = setInterval(onChangePolling, 5000);\n    }\n\n    /* State Data Query */\n    /* ---------------------------------------------------------------------- */\n\n    // async function resetUUID() {\n    //     try {\n    //         console.log(\"reset\");\n    //         await registration.resetUUID();\n\n    //         setUUIDHex(registration.uuidHex);\n\n    //         await initIsBoundViaContract();\n\n    //         initIsUUIDLinked();\n    //     } catch (e) {\n    //         // console.error(e);\n    //         // console.log(e);\n    //     }\n    // }\n\n    async function checkIfAlreadyHoldsNFT() {\n        const tokenBalance = await registration.queryTokenBalance();\n\n        const holdsToken = tokenBalance > 0;\n\n        setAlreadyHoldsToken(holdsToken);\n    }\n\n    async function resetWalletData() {\n        try {\n            await registration.resetWalletData();\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initWalletAddress() {\n        try {\n            const walletAddress = await registration.initWalletAddress();\n\n            setWalletAddress(walletAddress);\n            setStepConnectWalletError(\"\");\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initUUIDHex() {\n        try {\n            setUUIDHex(registration.uuid);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initENSName() {\n        try {\n            const ensName = await registration.initENSName();\n\n            setENSName(ensName);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initChainId() {\n        try {\n            const chainId = await registration.initChainId();\n\n            setChainId(chainId);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initTotalSupply() {\n        try {\n            const totalSupply = await registration.initTotalSupply();\n\n            const remainingSupply = Number(maxSupply) - Number(totalSupply);\n\n            // setTotalSupply(totalSupply);\n            setRemainingSupply(remainingSupply);\n            setRemainingSupplyChecked(true);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initGasBalance() {\n        try {\n            const gasBalance = await registration.initGasBalance();\n\n            setGasBalance(gasBalance);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initCanAutoSwitchNetworks() {\n        try {\n            const canAutoSwitchNetworks =\n                await registration.canAutoSwitchNetworks();\n\n            setCanAutoSwitchNetworks(canAutoSwitchNetworks);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initQrCodeUUIDUrl() {\n        try {\n            const qrCodeUUIDUrl = await registration.getQrCodeUUIDUrl();\n\n            setQrCodeUUIDUrl(qrCodeUUIDUrl);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initIsUUIDLinked() {\n        try {\n            const isUUIDLinked = await registration.initIsUUIDLinked();\n\n            setIsUUIDLinked(isUUIDLinked);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initIsUUIDSigned() {\n        try {\n            const isUUIDSigned = await registration.initIsUUIDSigned();\n\n            // console.log(isUUIDSigned);\n\n            setIsUUIDSigned(isUUIDSigned);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async function initIsBoundViaContract() {\n        try {\n            setBoundViaContractChecking(true);\n\n            const isBoundViaContract =\n                await registration.initIsBoundViaContract();\n\n            // console.log(isBoundViaContract);\n\n            setIsBoundViaContract(isBoundViaContract);\n            setBoundViaContractChecking(false);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n            setBoundViaContractChecking(false);\n        }\n    }\n\n    async function initIsMintedViaContract() {\n        try {\n            const isMintedViaContract =\n                await registration.initIsMintedViaContract();\n\n            // console.log(isMintedViaContract);\n\n            setIsMintedViaContract(isMintedViaContract);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    /* Interactive Events */\n    /* ---------------------------------------------------------------------- */\n\n    function verifyWithBrightID() {\n        window.open(brightIdMeetUrl, \"_blank\");\n    }\n\n    function linkUUIDToBrightID() {\n        // window.open(qrCodeUUIDUrl);\n\n        var url = qrCodeUUIDUrl;\n\n        if (url === \"\") {\n            return;\n        }\n\n        var linker = new DeepLinker({\n            onIgnored: function () {\n                console.log(\"browser failed to respond to the deep link\");\n\n                setLinkUUIDToBrightIDError(\n                    \"Couldn't open BrightID. Scan the QR code below with the device you have BrightID installed on.\"\n                );\n            },\n            onFallback: function () {\n                console.log(\"dialog hidden or user returned to tab\");\n            },\n            onReturn: function () {\n                console.log(\"user returned to the page from the native app\");\n            },\n        });\n\n        linker.openURL(url);\n    }\n\n    async function initRegistration() {\n        if (typeof registration === \"object\") {\n            return;\n        }\n\n        console.log(\"initRegistration\");\n\n        // Initialize registration class.\n        registration = new BrightIDNftMintModel(\n            statePrefix,\n            context,\n            contractAddr,\n            mainnetRpcUrl,\n            walletConnectInfuraId,\n            relayBindURL,\n            relayMintURL,\n            maxSupply,\n            appStoreAndroid,\n            appStoreIos,\n            brightIdMeetUrl,\n            deepLinkPrefix,\n            mintTokenFaucetUrl,\n            mintChainId,\n            mintChainName,\n            mintTokenName,\n            mintTokenDecimal,\n            mintBlockExplorerUrl,\n            mintBlockExplorerTxnPath,\n            mintRpcUrl,\n            verificationUrl\n        );\n    }\n\n    async function init() {\n        await initRegistration();\n\n        initTotalSupply();\n\n        // Restore mode\n        // restoreMode(); // TEMP DISABLE GAS CHOICE\n\n        // Reconnect on Load\n        reconnectWallet();\n    }\n\n    async function initAllowMode() {\n        // const gasBalance = await registration.initGasBalance();\n\n        // if (gasBalance) {\n        //     setAllowMode(false);\n        //     setModeGas();\n        // } else {\n        //     setAllowMode(true);\n        // }\n\n        setAllowMode(false); // TEMP DISABLE GAS CHOICE\n        setModeGas(); // TEMP DISABLE GAS CHOICE\n    }\n\n    async function reconnectWallet() {\n        await initRegistration();\n\n        if (registration.hasReconnectableWallet()) {\n            connectWallet();\n        }\n    }\n\n    async function connectWallet() {\n        try {\n            setStepConnectWalletError(\"\");\n            await initRegistration();\n            removeEvents();\n            await registration.connectWallet();\n            addEvents();\n            onAccountChange();\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            onAccountDisconnect();\n\n            if (e.message === \"User Rejected\") {\n                setStepConnectWalletError(\"Unlock your wallet to continue\");\n            } else {\n                setStepConnectWalletError(e.message);\n            }\n        }\n    }\n\n    async function chooseWallet() {\n        try {\n            setStepConnectWalletError(\"\");\n            await initRegistration();\n            removeEvents();\n            await registration.chooseWallet();\n            addEvents();\n            onAccountChange();\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            onAccountDisconnect();\n\n            if (e.message === \"User Rejected\") {\n                setStepConnectWalletError(\"Unlock your wallet to continue\");\n            } else {\n                setStepConnectWalletError(e.message);\n            }\n        }\n    }\n\n    async function faucetClaim() {\n        window.open(mintTokenFaucetUrl, \"_blank\");\n    }\n\n    async function switchToMintNetwork() {\n        try {\n            await registration.switchToMintNetwork();\n\n            setStepSwitchToMintNetworkError(\"\");\n        } catch (switchError) {\n            // console.log(switchError);\n\n            // This error code indicates that the chain has not been added to MetaMask.\n            if (switchError.code === 4902) {\n                addMintNetwork();\n\n                return;\n            }\n\n            // console.error(switchError);\n            // console.log(switchError);\n\n            setStepSwitchToMintNetworkError(switchError.message);\n        }\n    }\n\n    async function switchToMainnetNetwork() {\n        try {\n            await registration.switchToMainnetNetwork();\n        } catch (switchError) {\n            // console.error(switchError);\n            // console.log(switchError);\n        }\n    }\n\n    async function addMintNetwork() {\n        try {\n            await registration.addMintNetwork();\n\n            setStepSwitchToMintNetworkError(\"\");\n        } catch (addError) {\n            // console.error(addError);\n            // console.log(addError);\n\n            setStepSwitchToMintNetworkError(addError.message);\n        }\n    }\n\n    async function signUUID() {\n        try {\n            setStepSignUUIDProcessing(true);\n\n            await registration.signBindParams();\n\n            await initIsUUIDSigned();\n\n            setStepSignUUIDError(\"\");\n            setStepSignUUIDProcessing(false);\n        } catch (e) {\n            console.error(e);\n            // console.log(e);\n\n            await initIsUUIDSigned();\n\n            const errorMessage = registration.getSignErrorMessage(e);\n            setStepSignUUIDError(errorMessage);\n            setStepSignUUIDProcessing(false);\n        }\n    }\n\n    async function handleUUIDAlreadyBoundError() {\n        setStepBoundViaContractError(\"\");\n        setIsBoundViaContractTxnProcessing(false);\n        setIsBoundViaContractTxnId(null);\n        setStepBindViaRelayProcessing(false);\n\n        try {\n            await initIsBoundViaContract();\n\n            if (registration.isBoundViaContract === false) {\n                throw new Error(\"Transaction failed. Please try again.\");\n            }\n        } catch (e) {\n            const errorMessage = registration.getBindErrorMessage(e);\n            setStepBoundViaContractError(errorMessage);\n        }\n    }\n\n    async function bindViaTransaction(isRetry = false) {\n        try {\n            setStepBindViaRelayProcessing(true);\n\n            const tx = await registration.bindViaTransaction();\n\n            setIsBoundViaContractTxnProcessing(true);\n            setIsBoundViaContractTxnId(tx.hash);\n            setStepBoundViaContractError(\"\");\n\n            // wait for the transaction to be mined\n            const receipt = await tx.wait();\n\n            if (!receipt.blockNumber || Number(receipt.status) !== 1) {\n                throw new Error(\"Transaction failed. Please try again.\");\n            }\n\n            await initIsBoundViaContract();\n\n            if (registration.isBoundViaContract === false) {\n                throw new Error(\"Transaction failed. Please try again.\");\n            }\n\n            setStepBoundViaContractError(\"\");\n            setIsBoundViaContractTxnProcessing(false);\n            setIsBoundViaContractTxnId(null);\n            setStepBindViaRelayProcessing(false);\n\n            setAllowBindRetry(false);\n        } catch (e) {\n            console.error(e);\n            // console.log(e);\n\n            if (\n                isRetry === false &&\n                registration.getIsUUIDAlreadyBoundError(e)\n            ) {\n                handleUUIDAlreadyBoundError();\n\n                return;\n            }\n\n            await initIsBoundViaContract();\n\n            const errorMessage = registration.getBindErrorMessage(e);\n            setStepBoundViaContractError(errorMessage);\n            setIsBoundViaContractTxnProcessing(false);\n            setIsBoundViaContractTxnId(null);\n            setStepBindViaRelayProcessing(false);\n\n            setAllowBindRetry(false);\n        }\n    }\n\n    async function bindViaRelay(isRetry = false) {\n        try {\n            setStepBindViaRelayProcessing(true);\n\n            setStepBindViaRelayStatus(\n                \"We're binding your UUID.  This could take a minute or two. Please wait.\"\n            );\n\n            const response = await registration.bindViaRelay();\n\n            if (response.ok === false) {\n                const body = await response.json();\n\n                // console.log(body);\n                // console.log(body.error);\n                // console.log(body.error.message);\n\n                throw new Error(body.error.message);\n            }\n\n            await initIsBoundViaContract();\n\n            setStepBindViaRelayError(\"\");\n            setStepBindViaRelayStatus(\"\");\n            setStepBindViaRelayProcessing(false);\n\n            setAllowBindRetry(false);\n        } catch (e) {\n            console.error(e);\n            // console.log(e);\n\n            if (\n                isRetry === false &&\n                registration.getIsUUIDAlreadyBoundError(e)\n            ) {\n                handleUUIDAlreadyBoundError();\n\n                return;\n            }\n\n            await initIsBoundViaContract();\n\n            const errorMessage = registration.getBindErrorMessage(e);\n            setStepBindViaRelayError(errorMessage);\n            setStepBindViaRelayStatus(\"\");\n            setStepBindViaRelayProcessing(false);\n\n            setAllowBindRetry(false);\n        }\n    }\n\n    async function mintViaTransaction() {\n        try {\n            setStepMintViaRelayProcessing(true);\n\n            const tx = await registration.mintViaTransaction();\n\n            setIsMintedViaContractTxnProcessing(true);\n            setIsMintedViaContractTxnId(tx.hash);\n            setStepMintedViaContractError(\"\");\n\n            // wait for the transaction to be mined\n            const receipt = await tx.wait();\n\n            if (!receipt.blockNumber || Number(receipt.status) !== 1) {\n                throw new Error(\"Transaction failed. Please try again.\");\n            }\n\n            await initIsMintedViaContract();\n\n            setStepMintedViaContractError(\"\");\n            setIsMintedViaContractTxnProcessing(false);\n            setIsMintedViaContractTxnId(null);\n            setStepMintViaRelayProcessing(false);\n        } catch (e) {\n            console.error(e);\n            // console.log(e);\n\n            await initIsMintedViaContract();\n\n            const errorMessage = registration.getMintErrorMessage(e);\n            setStepMintedViaContractError(errorMessage);\n            setIsMintedViaContractTxnProcessing(false);\n            setIsMintedViaContractTxnId(null);\n            setStepMintViaRelayProcessing(false);\n\n            if (registration.getIsUUIDUnboundError(e)) {\n                setAllowBindRetry(true);\n            }\n        }\n    }\n\n    async function mintViaRelay() {\n        try {\n            setStepMintViaRelayProcessing(true);\n\n            setStepMintViaRelayStatus(\n                \"We're minting your NFT.  This could take a minute or two. Please wait.\"\n            );\n\n            const response = await registration.mintViaRelay();\n\n            if (response.ok === false) {\n                const body = await response.json();\n\n                // console.log(body);\n                // console.log(body.error);\n                // console.log(body.error.message);\n\n                throw new Error(body.error.message);\n            }\n\n            await initIsMintedViaContract();\n\n            setStepMintViaRelayError(\"\");\n            setStepMintViaRelayStatus(\"\");\n            setStepMintViaRelayProcessing(false);\n        } catch (e) {\n            console.error(e);\n            // console.log(e);\n\n            await initIsMintedViaContract();\n\n            const errorMessage = registration.getMintErrorMessage(e);\n            setStepMintViaRelayError(errorMessage);\n            setStepMintViaRelayStatus(\"\");\n            setStepMintViaRelayProcessing(false);\n\n            if (registration.getIsUUIDUnboundError(e)) {\n                setAllowBindRetry(true);\n            }\n        }\n    }\n\n    /* Step State Checks */\n    /* ---------------------------------------------------------------------- */\n\n    function restoreMode() {\n        if (sessionStorage.getItem(`${statePrefix}-mode`) !== null) {\n            const mode = sessionStorage.getItem(`${statePrefix}-mode`);\n\n            setMode(mode);\n        }\n    }\n\n    function changeMode(mode) {\n        sessionStorage.setItem(`${statePrefix}-mode`, mode);\n\n        setMode(mode);\n    }\n\n    function setModeGas() {\n        changeMode(\"gas\");\n    }\n\n    function setModeGasless() {\n        changeMode(\"gasless\");\n    }\n\n    function hasRelay() {\n        return mode === \"gasless\";\n    }\n\n    function hasConnectedWallet() {\n        return walletAddress !== \"\";\n    }\n\n    function hasSignedUUID() {\n        return isUUIDSigned === true;\n    }\n\n    function hasUUIDLinked() {\n        return isUUIDLinked === true;\n    }\n\n    function hasBoundViaContract() {\n        return isBoundViaContract === true;\n    }\n\n    function hasMintedViaContract() {\n        return isMintedViaContract === true;\n    }\n\n    function hasSwitchedToMintNetwork() {\n        return chainId === Number(mintChainId);\n    }\n\n    function hasObtainedGasTokens() {\n        return gasBalance > 0;\n    }\n\n    function hasModeSelection() {\n        return stepConnectWalletComplete() && allowMode;\n    }\n\n    function hasModeSelected() {\n        return stepConnectWalletComplete() && mode !== \"\";\n    }\n\n    function hasReachedMaxSupply() {\n        return Number(remainingSupply) <= 0;\n    }\n\n    /* Step Completion Flags */\n    /* ---------------------------------------------------------------------- */\n\n    function getStepCompleteString(status) {\n        return status === true ? \"complete\" : \"incomplete\";\n    }\n\n    function stepConnectWalletComplete() {\n        return hasConnectedWallet();\n    }\n\n    function stepSwitchToMintNetworkComplete() {\n        return hasSwitchedToMintNetwork();\n    }\n\n    function stepObtainGasTokensComplete() {\n        return hasObtainedGasTokens();\n    }\n\n    function stepSignUUIDComplete() {\n        return hasSignedUUID();\n    }\n\n    function stepUUIDLinkedComplete() {\n        return hasUUIDLinked();\n    }\n\n    function stepBindViaRelayComplete() {\n        return hasBoundViaContract() && boundViaContractChecking === false;\n    }\n\n    function stepMintViaRelayComplete() {\n        return hasMintedViaContract();\n    }\n\n    /* Step Active Flags */\n    /* ---------------------------------------------------------------------- */\n\n    function getStepActiveString(status) {\n        return status === true ? \"active\" : \"inactive\";\n    }\n\n    function stepConnectWalletActive() {\n        return true;\n    }\n\n    function stepSwitchToMintNetworkActive() {\n        return stepConnectWalletActive();\n    }\n\n    function stepObtainGasTokensActive() {\n        return (\n            stepSwitchToMintNetworkComplete() && stepSwitchToMintNetworkActive()\n        );\n    }\n\n    function stepSignUUIDActive() {\n        return (\n            (hasRelay() &&\n                stepConnectWalletComplete() &&\n                stepConnectWalletActive()) ||\n            (!hasRelay() &&\n                stepObtainGasTokensComplete() &&\n                stepObtainGasTokensActive())\n        );\n    }\n\n    function stepBindViaRelayActive() {\n        return stepSignUUIDComplete() && stepSignUUIDActive();\n    }\n\n    function stepUUIDLinkedActive() {\n        return stepBindViaRelayComplete() && stepBindViaRelayActive();\n    }\n\n    function stepMintViaRelayActive() {\n        return stepUUIDLinkedComplete() && stepUUIDLinkedActive();\n    }\n\n    /* Bootstrap */\n    /* ---------------------------------------------------------------------- */\n\n    useEffect(() => {\n        if (firstUpdate.current === false) {\n            return;\n        }\n\n        if (firstUpdate.current) {\n            firstUpdate.current = false;\n        }\n\n        init();\n    });\n\n    /* Template */\n    /* ---------------------------------------------------------------------- */\n\n    return (\n        <div className=\"brightid-nft-mint\">\n            {remainingSupplyChecked && hasReachedMaxSupply() && (\n                <div className=\"brightid-nft-mint-supply brightid-nft-mint-supply--sold-out\">\n                    <section className={`brightid-nft-mint-step`}>\n                        <div className=\"brightid-nft-mint-step__description brightid-nft-mint-step__description--no-header\">\n                            <p className=\"brightid-nft-mint-step__description-p\">\n                                <strong>Mints Remaining:</strong> No more mints\n                                remaining\n                            </p>\n                        </div>\n\n                        <div className=\"brightid-nft-mint-step__description\">\n                            <p className=\"brightid-nft-mint-step__description-p\">\n                                Thanks to everyone who minted, and sorry to\n                                those who were unable to get one.\n                            </p>\n                        </div>\n                        <br />\n\n                        <h3 className=\"brightid-nft-mint-step__description-p\">\n                            Rescuing a BrightID Soulbound NFT\n                        </h3>\n                        <div className=\"brightid-nft-mint-step__description\">\n                            <p className=\"brightid-nft-mint-step__description-p\">\n                                If you need to rescue your BrightID Soulbound\n                                NFT from a lost wallet please go to{\" \"}\n                                <a href=\"https://10krescue.brightid.org\">\n                                    https://10krescue.brightid.org\n                                </a>\n                            </p>\n                        </div>\n                    </section>\n                </div>\n            )}\n\n            {remainingSupplyChecked && !hasReachedMaxSupply() && (\n                <div className=\"brightid-nft-mint-supply\">\n                    <section className={`brightid-nft-mint-step`}>\n                        <div className=\"brightid-nft-mint-step__description brightid-nft-mint-step__description--no-header\">\n                            <p className=\"brightid-nft-mint-step__description-p\">\n                                <strong>Mints Remaining:</strong>{\" \"}\n                                {remainingSupply} of {maxSupply}\n                            </p>\n                        </div>\n                    </section>\n                </div>\n            )}\n\n            {remainingSupplyChecked && !hasReachedMaxSupply() && (\n                <div>\n                    <section className={`brightid-nft-mint-step`}>\n                        <div className=\"brightid-nft-mint-step__main\">\n                            <div className=\"brightid-nft-mint-step__header\">\n                                <h2 className=\"brightid-nft-mint-step__heading\">\n                                    Install BrightID\n                                </h2>\n                            </div>\n                            <div className=\"brightid-nft-mint-step__action brightid-nft-mint-step__action--app-store\">\n                                <div>\n                                    <a\n                                        href={appStoreAndroid}\n                                        target=\"_blank\"\n                                        rel=\"noreferrer noopener\"\n                                    >\n                                        <img\n                                            className=\"brightid-nft-mint-step__app-store-image\"\n                                            src={googlePlay}\n                                            alt=\"Get it on Google Play\"\n                                        />\n                                    </a>\n                                </div>\n                                <div>\n                                    <a\n                                        href={appStoreIos}\n                                        target=\"_blank\"\n                                        rel=\"noreferrer noopener\"\n                                    >\n                                        <img\n                                            className=\"brightid-nft-mint-step__app-store-image\"\n                                            src={appStore}\n                                            alt=\"Download on App Store\"\n                                        />\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"brightid-nft-mint-step__description\">\n                            <p className=\"brightid-nft-mint-step__description-p\">\n                                The first step is to install the BrightID app on\n                                your mobile device.\n                            </p>\n                        </div>\n                    </section>\n\n                    <section className={`brightid-nft-mint-step`}>\n                        <div className=\"brightid-nft-mint-step__main\">\n                            <div className=\"brightid-nft-mint-step__header\">\n                                <h2 className=\"brightid-nft-mint-step__heading\">\n                                    Verify with BrightID\n                                </h2>\n                            </div>\n                        </div>\n                        <div className=\"brightid-nft-mint-step__description\">\n                            <p className=\"brightid-nft-mint-step__description-p\">\n                                Once you have BrightID installed you need to\n                                become verified in their system by participating\n                                in a \"Connection Party\".\n                            </p>\n                            <p className=\"brightid-nft-mint-step__description-button-container\">\n                                <button\n                                    className=\"brightid-nft-mint-step__button\"\n                                    onClick={() => verifyWithBrightID()}\n                                >\n                                    Find Connection Party\n                                </button>\n                            </p>\n                            <h3 className=\"brightid-nft-mint-step__description-p\">\n                                Support\n                            </h3>\n                            <p className=\"brightid-nft-mint-step__description-p\">\n                                More details on becoming verified within the\n                                BrightID system can be found at{\" \"}\n                                <a\n                                    className=\"brightid-nft-mint-step__description-link\"\n                                    href=\"https://brightid.gitbook.io/brightid/getting-verified\"\n                                    target=\"_blank\"\n                                    rel=\"noreferrer\"\n                                >\n                                    How To Verify\n                                </a>\n                                .\n                            </p>\n                            <p className=\"brightid-nft-mint-step__description-p\">\n                                They also have a{\" \"}\n                                <a\n                                    className=\"brightid-nft-mint-step__description-link\"\n                                    href=\"https://discord.gg/xzhFEeK\"\n                                    target=\"_blank\"\n                                    rel=\"noreferrer\"\n                                >\n                                    Discord channel\n                                </a>{\" \"}\n                                for support.\n                            </p>\n                            <h3 className=\"brightid-nft-mint-step__description-p\">\n                                After Verification\n                            </h3>\n                            <p className=\"brightid-nft-mint-step__description-p\">\n                                After you have verified via a connection party,\n                                it will take up to 10 minutes for you to become\n                                verified in their system. You will know when\n                                you're ready to continue through the rest of\n                                steps in this process when you see \"BrightID\n                                meet\" checked off in your list of achievements.\n                                See the screenshots below for where to look in\n                                the app.\n                            </p>\n\n                            <p className=\"brightid-nft-mint-step__description-p brightid-nft-mint-step__description-p--2col-img\">\n                                <img\n                                    className=\"brightid-nft-mint-step__app-store-image\"\n                                    src={openAchievementsSS}\n                                    alt=\"Open Achievements\"\n                                />\n                                <img\n                                    className=\"brightid-nft-mint-step__app-store-image\"\n                                    src={isVerifiedSS}\n                                    alt=\"Check Is Verified\"\n                                />\n                            </p>\n                        </div>\n                    </section>\n\n                    <section\n                        className={`\n                            brightid-nft-mint-step\n                            brightid-nft-mint-step--connect\n                            brightid-nft-mint-step--${getStepCompleteString(\n                                stepConnectWalletComplete()\n                            )}\n                            brightid-nft-mint-step--${getStepActiveString(\n                                stepConnectWalletActive()\n                            )}\n                        `}\n                    >\n                        <div className=\"brightid-nft-mint-step__main\">\n                            <div className=\"brightid-nft-mint-step__status\">\n                                <div className=\"brightid-nft-mint-step__status-icon\"></div>\n                            </div>\n                            <div className=\"brightid-nft-mint-step__header\">\n                                <h2 className=\"brightid-nft-mint-step__heading\">\n                                    Connect Wallet\n                                </h2>\n                            </div>\n                            <div className=\"brightid-nft-mint-step__action\">\n                                <button\n                                    className=\"brightid-nft-mint-step__button\"\n                                    onClick={() => chooseWallet()}\n                                >\n                                    Connect\n                                </button>\n                            </div>\n                        </div>\n                        <div className=\"brightid-nft-mint-step__description\">\n                            {ensName && (\n                                <p className=\"brightid-nft-mint-step__description-p\">\n                                    <strong>ENS: </strong>\n                                    <span className=\"brightid-nft-mint-step__description-ens-address\">\n                                        {ensName}\n                                    </span>\n                                </p>\n                            )}\n                            {walletAddress && (\n                                <p className=\"brightid-nft-mint-step__description-p\">\n                                    <strong>Address: </strong>\n                                    <span className=\"brightid-nft-mint-step__description-wallet-address\">\n                                        {walletAddress}\n                                    </span>\n                                </p>\n                            )}\n                            {!walletAddress && (\n                                <p className=\"brightid-nft-mint-step__description-p\">\n                                    <strong>Address: </strong>\n                                    <span>Not Connected</span>\n                                </p>\n                            )}\n                        </div>\n                        <div className=\"brightid-nft-mint-step__feedback\">\n                            {stepConnectWalletError && (\n                                <div className=\"brightid-nft-mint-step__response brightid-nft-mint-step__response--error\">\n                                    {stepConnectWalletError}\n                                </div>\n                            )}\n                        </div>\n                    </section>\n\n                    {hasModeSelection() && (\n                        <section className={`brightid-nft-mint-step`}>\n                            <div className=\"brightid-nft-mint-step__main\">\n                                <div className=\"brightid-nft-mint-step__header\">\n                                    <h2 className=\"brightid-nft-mint-step__heading\">\n                                        Select the type of experience.\n                                    </h2>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__action\">\n                                    <button\n                                        className=\"brightid-nft-mint-step__button\"\n                                        onClick={() => setModeGas()}\n                                    >\n                                        Gas\n                                    </button>\n                                    <button\n                                        className=\"brightid-nft-mint-step__button\"\n                                        onClick={() => setModeGasless()}\n                                    >\n                                        Gasless\n                                    </button>\n                                </div>\n                            </div>\n                            <div className=\"brightid-nft-mint-step__description\">\n                                <p className=\"brightid-nft-mint-step__description-p\">\n                                    <strong>gas:</strong> you'll execute\n                                    transactions on Gnosis Chain using xDAI for\n                                    gas.\n                                </p>\n                                <p className=\"brightid-nft-mint-step__description-p\">\n                                    <strong>gasless:</strong> We'll cover the\n                                    gas fees for you, but you may experience\n                                    rate limits.\n                                </p>\n                            </div>\n                            {mode && (\n                                <div className=\"brightid-nft-mint-step__description\">\n                                    <p className=\"brightid-nft-mint-step__description-p\">\n                                        <strong>\n                                            Current Mode:{\" \"}\n                                            <span className=\"brightid-nft-mint-step__important\">\n                                                {mode}\n                                            </span>\n                                        </strong>\n                                    </p>\n                                </div>\n                            )}\n                        </section>\n                    )}\n\n                    {hasModeSelected() && !hasRelay() && (\n                        <section\n                            className={`\n                                brightid-nft-mint-step\n                                brightid-nft-mint-step--${getStepCompleteString(\n                                    stepSwitchToMintNetworkComplete()\n                                )}\n                                brightid-nft-mint-step--${getStepActiveString(\n                                    stepSwitchToMintNetworkActive()\n                                )}\n                            `}\n                        >\n                            <div className=\"brightid-nft-mint-step__main\">\n                                <div className=\"brightid-nft-mint-step__status\">\n                                    <div className=\"brightid-nft-mint-step__status-icon\"></div>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__header\">\n                                    <h2 className=\"brightid-nft-mint-step__heading\">\n                                        Switch Wallet to {mintChainName}\n                                    </h2>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__action\">\n                                    {canAutoSwitchNetworks && (\n                                        <button\n                                            className=\"brightid-nft-mint-step__button\"\n                                            onClick={() =>\n                                                switchToMintNetwork()\n                                            }\n                                        >\n                                            Switch\n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n                            {stepConnectWalletComplete() &&\n                                !canAutoSwitchNetworks && (\n                                    <div\n                                        className=\"\n                                            brightid-nft-mint-step__description\n                                            brightid-nft-mint-step__description--action\n                                            brightid-nft-mint-step__description--action-hide-on-complete\n                                        \"\n                                    >\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            In your wallet app create a new\n                                            network with the following data and\n                                            switch to that network.\n                                        </p>\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            <strong>Network Name: </strong>\n                                            {mintChainName}\n                                        </p>\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            <strong>RPC URL: </strong>\n                                            {mintRpcUrl}\n                                        </p>\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            <strong>Chain ID: </strong>\n                                            {mintChainId}\n                                        </p>\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            <strong>Currency Symbol: </strong>\n                                            {mintTokenName}\n                                        </p>\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            <strong>\n                                                Block Explorer URL:{\" \"}\n                                            </strong>\n                                            {mintBlockExplorerUrl}\n                                        </p>\n                                    </div>\n                                )}\n                            <div className=\"brightid-nft-mint-step__feedback\">\n                                {stepSwitchToMintNetworkError && (\n                                    <div className=\"brightid-nft-mint-step__response brightid-nft-mint-step__response--error\">\n                                        {stepSwitchToMintNetworkError}\n                                    </div>\n                                )}\n                            </div>\n                        </section>\n                    )}\n\n                    {hasModeSelected() && !hasRelay() && (\n                        <section\n                            className={`\n                                brightid-nft-mint-step\n                                brightid-nft-mint-step--${getStepCompleteString(\n                                    stepObtainGasTokensComplete()\n                                )}\n                                brightid-nft-mint-step--${getStepActiveString(\n                                    stepObtainGasTokensActive()\n                                )}\n                            `}\n                        >\n                            <div className=\"brightid-nft-mint-step__main\">\n                                <div className=\"brightid-nft-mint-step__status\">\n                                    <div className=\"brightid-nft-mint-step__status-icon\"></div>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__header\">\n                                    <h2 className=\"brightid-nft-mint-step__heading\">\n                                        Obtain {mintTokenName} Gas Tokens\n                                    </h2>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__action\">\n                                    {stepSwitchToMintNetworkComplete() && (\n                                        <button\n                                            className=\"brightid-nft-mint-step__button\"\n                                            onClick={() => faucetClaim()}\n                                        >\n                                            Obtain\n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n                            <div className=\"brightid-nft-mint-step__description\">\n                                <p className=\"brightid-nft-mint-step__description-p\">\n                                    <strong>Balance: </strong>\n                                    <span className=\"brightid-nft-mint-step__description-balance\">\n                                        {gasBalance} {mintTokenName}\n                                    </span>\n                                </p>\n                            </div>\n                        </section>\n                    )}\n\n                    {hasModeSelected() && (\n                        <section\n                            className={`\n                                brightid-nft-mint-step\n                                brightid-nft-mint-step--${getStepCompleteString(\n                                    stepSignUUIDComplete()\n                                )}\n                                brightid-nft-mint-step--${getStepActiveString(\n                                    stepSignUUIDActive()\n                                )}\n                            `}\n                        >\n                            <div className=\"brightid-nft-mint-step__main\">\n                                <div className=\"brightid-nft-mint-step__status\">\n                                    <div className=\"brightid-nft-mint-step__status-icon\"></div>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__header\">\n                                    <h2 className=\"brightid-nft-mint-step__heading\">\n                                        Sign UUID\n                                    </h2>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__action\">\n                                    {stepConnectWalletComplete() && (\n                                        <button\n                                            className=\"brightid-nft-mint-step__button\"\n                                            onClick={() => signUUID()}\n                                            disabled={\n                                                stepSignUUIDProcessing\n                                                    ? true\n                                                    : null\n                                            }\n                                        >\n                                            Sign\n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n                            <div className=\"brightid-nft-mint-step__description\">\n                                <p className=\"brightid-nft-mint-step__description-p\">\n                                    In this step you will be asked to sign a\n                                    hash of the UUID below with your wallet.\n                                </p>\n                                {uuidHex && (\n                                    <p className=\"brightid-nft-mint-step__description-p\">\n                                        <strong>UUID: </strong>\n                                        <span className=\"brightid-nft-mint-step__description-wallet-address\">\n                                            {uuidHex}\n                                        </span>\n\n                                        {/*\n                                        <span className=\"brightid-nft-mint-step__description-reset\">\n                                            If you have issues with this UUID you\n                                            can reset it.\n                                        </span>\n                                        <button\n                                            className=\"brightid-nft-mint-step__button brightid-nft-mint-step__button--small\"\n                                            onClick={() => resetUUID()}\n                                        >\n                                            Reset\n                                        </button>\n                                        */}\n                                    </p>\n                                )}\n                            </div>\n                            <div className=\"brightid-nft-mint-step__feedback\">\n                                {stepSignUUIDError && (\n                                    <div className=\"brightid-nft-mint-step__response brightid-nft-mint-step__response--error\">\n                                        {stepSignUUIDError}\n                                    </div>\n                                )}\n                            </div>\n                        </section>\n                    )}\n\n                    {hasModeSelected() && (\n                        <section\n                            className={`\n                                brightid-nft-mint-step\n                                brightid-nft-mint-step--${getStepCompleteString(\n                                    stepBindViaRelayComplete()\n                                )}\n                                brightid-nft-mint-step--${getStepActiveString(\n                                    stepBindViaRelayActive()\n                                )}\n                            `}\n                        >\n                            <div className=\"brightid-nft-mint-step__main\">\n                                <div className=\"brightid-nft-mint-step__status\">\n                                    <div className=\"brightid-nft-mint-step__status-icon\"></div>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__header\">\n                                    <h2 className=\"brightid-nft-mint-step__heading\">\n                                        Bind UUID\n                                    </h2>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__action\">\n                                    {!hasReachedMaxSupply() &&\n                                        hasRelay() &&\n                                        stepConnectWalletComplete() && (\n                                            <button\n                                                className=\"brightid-nft-mint-step__button\"\n                                                onClick={() =>\n                                                    bindViaRelay(false)\n                                                }\n                                                disabled={\n                                                    stepBindViaRelayProcessing ||\n                                                    boundViaContractChecking\n                                                        ? true\n                                                        : null\n                                                }\n                                            >\n                                                Bind\n                                            </button>\n                                        )}\n                                    {!hasReachedMaxSupply() &&\n                                        !hasRelay() &&\n                                        stepConnectWalletComplete() && (\n                                            <button\n                                                className=\"brightid-nft-mint-step__button\"\n                                                onClick={() =>\n                                                    bindViaTransaction(false)\n                                                }\n                                                disabled={\n                                                    stepBindViaRelayProcessing ||\n                                                    boundViaContractChecking\n                                                        ? true\n                                                        : null\n                                                }\n                                            >\n                                                Bind\n                                            </button>\n                                        )}\n                                    {hasReachedMaxSupply() && <em>Sold Out</em>}\n                                </div>\n                            </div>\n                            <div className=\"brightid-nft-mint-step__feedback\">\n                                {stepBindViaRelayStatus && (\n                                    <div className=\"brightid-nft-mint-step__response\">\n                                        <div className=\"brightid-nft-mint-step__response-loading-icon\">\n                                            <div className=\"brightid-nft-mint-step__loading-icon\">\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                            </div>\n                                        </div>\n                                        <div className=\"brightid-nft-mint-step__response-message\">\n                                            <div>{stepBindViaRelayStatus}</div>\n                                        </div>\n                                    </div>\n                                )}\n                                {stepBindViaRelayError && (\n                                    <div className=\"brightid-nft-mint-step__response brightid-nft-mint-step__response--error\">\n                                        {stepBindViaRelayError}\n                                    </div>\n                                )}\n                                {isBoundViaContractTxnProcessing && (\n                                    <div className=\"brightid-nft-mint-step__response\">\n                                        <div className=\"brightid-nft-mint-step__response-loading-icon\">\n                                            <div className=\"brightid-nft-mint-step__loading-icon\">\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                            </div>\n                                        </div>\n                                        <div className=\"brightid-nft-mint-step__response-message\">\n                                            <div>\n                                                Transaction is being\n                                                processed...\n                                            </div>\n                                            <div>\n                                                <a\n                                                    className=\"brightid-nft-mint-step__response-link\"\n                                                    href={`${mintBlockExplorerUrl}${mintBlockExplorerTxnPath}${isBoundViaContractTxnId}`}\n                                                    target=\"_blank\"\n                                                    rel=\"noreferrer\"\n                                                >\n                                                    View Transaction\n                                                </a>\n                                            </div>\n                                        </div>\n                                    </div>\n                                )}\n                                {stepBoundViaContractError && (\n                                    <div className=\"brightid-nft-mint-step__response brightid-nft-mint-step__response--error\">\n                                        {stepBoundViaContractError}\n                                    </div>\n                                )}\n                                {stepBindViaRelayComplete() && (\n                                    <div className=\"brightid-nft-mint-step__description\">\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            <strong>\n                                                Your UUID has been bound.\n                                            </strong>\n                                        </p>\n                                    </div>\n                                )}\n                            </div>\n                        </section>\n                    )}\n\n                    {hasModeSelected() && (\n                        <section\n                            className={`\n                                brightid-nft-mint-step\n                                brightid-nft-mint-step--brightid-link\n                                brightid-nft-mint-step--${getStepCompleteString(\n                                    stepUUIDLinkedComplete()\n                                )}\n                                brightid-nft-mint-step--${getStepActiveString(\n                                    stepUUIDLinkedActive()\n                                )}\n                            `}\n                        >\n                            <div className=\"brightid-nft-mint-step__main\">\n                                <div className=\"brightid-nft-mint-step__status\">\n                                    <div className=\"brightid-nft-mint-step__status-icon\"></div>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__header\">\n                                    <h2 className=\"brightid-nft-mint-step__heading\">\n                                        Link UUID to BrightID\n                                    </h2>\n                                </div>\n                            </div>\n                            {stepBindViaRelayComplete() && qrCodeUUIDUrl && (\n                                <div\n                                    className=\"\n                                        brightid-nft-mint-step__description\n                                        brightid-nft-mint-step__description--action\n                                    \"\n                                >\n                                    <div className=\"brightid-nft-mint-step--mobile\">\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            If you're on your mobile device just\n                                            use this button to open BrightID and\n                                            link your wallet.\n                                        </p>\n                                        <p className=\"brightid-nft-mint-step__description-button-container\">\n                                            <button\n                                                className=\"brightid-nft-mint-step__button\"\n                                                onClick={() =>\n                                                    linkUUIDToBrightID()\n                                                }\n                                            >\n                                                Link Address\n                                            </button>\n                                        </p>\n                                        <div className=\"brightid-nft-mint-step__feedback\">\n                                            {linkUUIDToBrightIDError && (\n                                                <div className=\"brightid-nft-mint-step__response brightid-nft-mint-step__response--error\">\n                                                    {linkUUIDToBrightIDError}\n                                                </div>\n                                            )}\n                                        </div>\n                                        <p className=\"brightid-nft-mint-step--mobile\">\n                                            <br />\n                                        </p>\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            If BrightID is installed on another\n                                            device scan the QR code below with\n                                            the \"Scan a Code\" button in the\n                                            BrightID mobile app.\n                                        </p>\n                                    </div>\n                                    <div className=\"brightid-nft-mint-step--desktop\">\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            Use the \"Scan a Code\" button in the\n                                            BrightID app to scan the QR code\n                                            below.\n                                        </p>\n                                    </div>\n                                    <p className=\"brightid-nft-mint-step__description-qrcode-container\">\n                                        <QRCode\n                                            renderAs=\"svg\"\n                                            size={200}\n                                            value={qrCodeUUIDUrl}\n                                        />\n                                    </p>\n                                    <div className=\"brightid-nft-mint-step--desktop\">\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            After linking, you'll get a\n                                            confirmation in the BrightID app.\n                                            Then just wait about 20-30 seconds\n                                            and this website will update to\n                                            allow continuing to the next step.\n                                        </p>\n                                    </div>\n                                </div>\n                            )}\n                            <div className=\"brightid-nft-mint-step__feedback\"></div>\n                        </section>\n                    )}\n\n                    {hasModeSelected() && (\n                        <section\n                            className={`\n                                brightid-nft-mint-step\n                                brightid-nft-mint-step--${getStepCompleteString(\n                                    stepMintViaRelayComplete()\n                                )}\n                                brightid-nft-mint-step--${getStepActiveString(\n                                    stepMintViaRelayComplete() ||\n                                        stepMintViaRelayActive()\n                                )}\n                            `}\n                        >\n                            <div className=\"brightid-nft-mint-step__main\">\n                                <div className=\"brightid-nft-mint-step__status\">\n                                    <div className=\"brightid-nft-mint-step__status-icon\"></div>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__header\">\n                                    <h2 className=\"brightid-nft-mint-step__heading\">\n                                        Mint NFT\n                                    </h2>\n                                </div>\n                                <div className=\"brightid-nft-mint-step__action\">\n                                    {!hasReachedMaxSupply() &&\n                                        hasRelay() &&\n                                        stepConnectWalletComplete() &&\n                                        stepBindViaRelayComplete() &&\n                                        stepUUIDLinkedComplete() && (\n                                            <button\n                                                className=\"brightid-nft-mint-step__button\"\n                                                onClick={() => mintViaRelay()}\n                                                disabled={\n                                                    stepMintViaRelayProcessing ||\n                                                    allowBindRetry\n                                                        ? true\n                                                        : null\n                                                }\n                                            >\n                                                Mint\n                                            </button>\n                                        )}\n                                    {!hasReachedMaxSupply() &&\n                                        !hasRelay() &&\n                                        stepConnectWalletComplete() &&\n                                        stepBindViaRelayComplete() &&\n                                        stepUUIDLinkedComplete() && (\n                                            <button\n                                                className=\"brightid-nft-mint-step__button\"\n                                                onClick={() =>\n                                                    mintViaTransaction()\n                                                }\n                                                disabled={\n                                                    stepMintViaRelayProcessing ||\n                                                    allowBindRetry\n                                                        ? true\n                                                        : null\n                                                }\n                                            >\n                                                Mint\n                                            </button>\n                                        )}\n                                    {hasReachedMaxSupply() && <em>Sold Out</em>}\n                                </div>\n                            </div>\n                            <div className=\"brightid-nft-mint-step__feedback\">\n                                {stepMintViaRelayStatus && (\n                                    <div className=\"brightid-nft-mint-step__response\">\n                                        <div className=\"brightid-nft-mint-step__response-loading-icon\">\n                                            <div className=\"brightid-nft-mint-step__loading-icon\">\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                            </div>\n                                        </div>\n                                        <div className=\"brightid-nft-mint-step__response-message\">\n                                            <div>{stepMintViaRelayStatus}</div>\n                                        </div>\n                                    </div>\n                                )}\n                                {stepMintViaRelayError && (\n                                    <div className=\"brightid-nft-mint-step__response brightid-nft-mint-step__response--error\">\n                                        {stepMintViaRelayError}\n                                    </div>\n                                )}\n                                {isMintedViaContractTxnProcessing && (\n                                    <div className=\"brightid-nft-mint-step__response\">\n                                        <div className=\"brightid-nft-mint-step__response-loading-icon\">\n                                            <div className=\"brightid-nft-mint-step__loading-icon\">\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                                <div></div>\n                                            </div>\n                                        </div>\n                                        <div className=\"brightid-nft-mint-step__response-message\">\n                                            <div>\n                                                Transaction is being\n                                                processed...\n                                            </div>\n                                            <div>\n                                                <a\n                                                    className=\"brightid-nft-mint-step__response-link\"\n                                                    href={`${mintBlockExplorerUrl}${mintBlockExplorerTxnPath}${isMintedViaContractTxnId}`}\n                                                    target=\"_blank\"\n                                                    rel=\"noreferrer\"\n                                                >\n                                                    View Transaction\n                                                </a>\n                                            </div>\n                                        </div>\n                                    </div>\n                                )}\n                                {stepMintedViaContractError && (\n                                    <div className=\"brightid-nft-mint-step__response brightid-nft-mint-step__response--error\">\n                                        {stepMintedViaContractError}\n                                    </div>\n                                )}\n                                {allowBindRetry && (\n                                    <div className=\"brightid-nft-mint-step__description\">\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            <strong>\n                                                Sorry it looks like your UUID\n                                                failed to bind properly. Please\n                                                use this retry button to rebind\n                                                it and then try minting again.\n                                            </strong>\n                                        </p>\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            {!hasReachedMaxSupply() &&\n                                                hasRelay() &&\n                                                stepConnectWalletComplete() && (\n                                                    <button\n                                                        className=\"brightid-nft-mint-step__button\"\n                                                        onClick={() =>\n                                                            bindViaRelay(true)\n                                                        }\n                                                        disabled={\n                                                            stepBindViaRelayProcessing\n                                                                ? true\n                                                                : null\n                                                        }\n                                                    >\n                                                        Retry Bind\n                                                    </button>\n                                                )}\n                                            {!hasReachedMaxSupply() &&\n                                                !hasRelay() &&\n                                                stepConnectWalletComplete() && (\n                                                    <button\n                                                        className=\"brightid-nft-mint-step__button\"\n                                                        onClick={() =>\n                                                            bindViaTransaction(\n                                                                true\n                                                            )\n                                                        }\n                                                        disabled={\n                                                            stepBindViaRelayProcessing\n                                                                ? true\n                                                                : null\n                                                        }\n                                                    >\n                                                        Retry Bind\n                                                    </button>\n                                                )}\n                                            {hasReachedMaxSupply() && (\n                                                <em>Sold Out</em>\n                                            )}\n                                        </p>\n                                    </div>\n                                )}\n                                {stepMintViaRelayComplete() && (\n                                    <div className=\"brightid-nft-mint-step__description\">\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            <strong>\n                                                Your NFT has been minted.\n                                            </strong>\n                                        </p>\n                                        <p className=\"brightid-nft-mint-step__description-p\">\n                                            {walletAddress && (\n                                                <a\n                                                    className=\"brightid-nft-mint-step__description-link\"\n                                                    href={`https://epor.io/${walletAddress}`}\n                                                    rel=\"noreferrer\"\n                                                >\n                                                    View Your NFT Here\n                                                </a>\n                                            )}\n                                        </p>\n\n                                        {!hasRelay() &&\n                                            hasSwitchedToMintNetwork() && (\n                                                <p className=\"brightid-nft-mint-step__description-p\">\n                                                    Before you leave you can use\n                                                    the button below to switch\n                                                    your wallet back to the\n                                                    Ethereum mainnet.\n                                                </p>\n                                            )}\n                                        {!hasRelay() &&\n                                            hasSwitchedToMintNetwork() &&\n                                            canAutoSwitchNetworks && (\n                                                <p className=\"brightid-nft-mint-step__description-p\">\n                                                    <button\n                                                        className=\"brightid-nft-mint-step__button\"\n                                                        onClick={() =>\n                                                            switchToMainnetNetwork()\n                                                        }\n                                                    >\n                                                        Switch back to Mainnet\n                                                    </button>\n                                                </p>\n                                            )}\n                                    </div>\n                                )}\n                            </div>\n                        </section>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default BrightIDNftMint;\n","export default \"data:image/png;base64,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\"","import logo from \"./logo.png\";\nimport \"./App.css\";\nimport { BrightIDNftMint } from \"./components/react-brightid-nft-mint/src\";\n// import { BrightIDNftMint } from \"react-brightid-nft-mint\";\n\nfunction AppMint() {\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n                <img className=\"App-header__image\" src={logo} alt=\"Soulbound\" />\n            </header>\n            <main>\n                <div className=\"App-brightid-nft-mint\">\n                    <BrightIDNftMint\n                        context=\"soulbound\"\n                        contractAddr=\"0x8884C28d13648128a7191Cb3C9Af7A9e14fCbF71\"\n                        // contractAddr=\"0x3F0FC15787511CCdc0bcc01950FCD13FFb4Ae95a\"\n                        // contractAddr=\"0x5bEeE3b35Df7AD8648E80EB52c47A481de086491\"\n                        mainnetRpcUrl=\"https://mainnet.infura.io/v3/60a7b2c16321439a917c9e74a994f7df\"\n                        walletConnectInfuraId=\"60a7b2c16321439a917c9e74a994f7df\"\n                        relayBindURL=\"https://brightid-nft-mint-relay.herokuapp.com/bind\"\n                        relayMintURL=\"https://brightid-nft-mint-relay.herokuapp.com/mint\"\n                        // relayBindURL=\"http://localhost:5001/brightid-nft-mint-relay/bind\"\n                        // relayMintURL=\"http://localhost:5001/brightid-nft-mint-relay/mint\"\n                        maxSupply=\"10000\"\n\n                        // appStoreAndroid=\"https://play.google.com/store/apps/details?id=org.brightid\"\n                        // appStoreIos=\"https://apps.apple.com/us/app/brightid/id1428946820\"\n                        // brightIdMeetUrl=\"https://meet.brightid.org\"\n                        // deepLinkPrefix=\"brightid://link-verification/http:%2f%2fnode.brightid.org\"\n                        // mintTokenFaucetUrl = \"https://www.gimlu.com/faucet\"\n                        // mintChainId = \"100\"\n                        // mintChainName = \"Gnosis Chain (formerly xDai)\"\n                        // mintTokenName = \"xDAI\"\n                        // mintTokenDecimal = \"18\"\n                        // mintBlockExplorerUrl = \"https://blockscout.com/xdai/mainnet\"\n                        // mintBlockExplorerTxnPath = \"/tx/\"\n                        // mintRpcUrl=\"https://rpc.gnosischain.com/\"\n                        // verificationUrl=\"https://app.brightid.org/node/v5/verifications\"\n                    />\n                </div>\n            </main>\n            <footer className=\"App-footer\">\n                &copy; 2022 BrightID - in collaboration with NFBeez\n            </footer>\n        </div>\n    );\n}\n\nexport default AppMint;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { HashRouter, Routes, Route } from \"react-router-dom\";\nimport AppMint from \"./AppMint\";\nimport AppRescue from \"./AppRescue\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <HashRouter>\n            <Routes>\n                <Route path=\"/\" element={<AppMint />} />\n                {/* <Route path=\"/\" element={<AppRescue />} /> */}\n                {/* <Route path=\"/mint\" element={<AppMint />} /> */}\n                {/* <Route path=\"/rescue\" element={<AppRescue />} /> */}\n            </Routes>\n        </HashRouter>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { ethers } from \"ethers\";\nimport Web3Modal from \"web3modal\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\n\nclass BrightIDNftMintModel {\n    contractAbi = [\n        {\n            type: \"constructor\",\n            stateMutability: \"nonpayable\",\n            inputs: [\n                { type: \"address\", name: \"verifier\", internalType: \"address\" },\n                { type: \"bytes32\", name: \"context\", internalType: \"bytes32\" },\n                { type: \"string\", name: \"name_\", internalType: \"string\" },\n                { type: \"string\", name: \"symbol_\", internalType: \"string\" },\n            ],\n        },\n        {\n            type: \"event\",\n            name: \"AddressBound\",\n            inputs: [\n                {\n                    type: \"address\",\n                    name: \"addr\",\n                    internalType: \"address\",\n                    indexed: true,\n                },\n            ],\n            anonymous: false,\n        },\n        {\n            type: \"event\",\n            name: \"ContextSet\",\n            inputs: [\n                {\n                    type: \"bytes32\",\n                    name: \"context\",\n                    internalType: \"bytes32\",\n                    indexed: false,\n                },\n            ],\n            anonymous: false,\n        },\n        {\n            type: \"event\",\n            name: \"OwnershipTransferred\",\n            inputs: [\n                {\n                    type: \"address\",\n                    name: \"previousOwner\",\n                    internalType: \"address\",\n                    indexed: true,\n                },\n                {\n                    type: \"address\",\n                    name: \"newOwner\",\n                    internalType: \"address\",\n                    indexed: true,\n                },\n            ],\n            anonymous: false,\n        },\n        {\n            type: \"event\",\n            name: \"Transfer\",\n            inputs: [\n                {\n                    type: \"address\",\n                    name: \"from\",\n                    internalType: \"address\",\n                    indexed: true,\n                },\n                {\n                    type: \"address\",\n                    name: \"to\",\n                    internalType: \"address\",\n                    indexed: true,\n                },\n                {\n                    type: \"uint256\",\n                    name: \"tokenId\",\n                    internalType: \"uint256\",\n                    indexed: true,\n                },\n            ],\n            anonymous: false,\n        },\n        {\n            type: \"event\",\n            name: \"VerifierSet\",\n            inputs: [\n                {\n                    type: \"address\",\n                    name: \"verifier\",\n                    internalType: \"address\",\n                    indexed: false,\n                },\n            ],\n            anonymous: false,\n        },\n        {\n            type: \"function\",\n            stateMutability: \"view\",\n            outputs: [{ type: \"uint256\", name: \"\", internalType: \"uint256\" }],\n            name: \"balanceOf\",\n            inputs: [\n                { type: \"address\", name: \"owner\", internalType: \"address\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"nonpayable\",\n            outputs: [],\n            name: \"bind\",\n            inputs: [\n                { type: \"address\", name: \"owner\", internalType: \"address\" },\n                { type: \"bytes32\", name: \"uuidHash\", internalType: \"bytes32\" },\n                { type: \"uint256\", name: \"nonce\", internalType: \"uint256\" },\n                { type: \"bytes\", name: \"signature\", internalType: \"bytes\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"pure\",\n            outputs: [{ type: \"bytes32\", name: \"\", internalType: \"bytes32\" }],\n            name: \"getUUIDHash\",\n            inputs: [\n                { type: \"address\", name: \"owner\", internalType: \"address\" },\n                { type: \"bytes32\", name: \"uuidHash\", internalType: \"bytes32\" },\n                { type: \"uint256\", name: \"nonce\", internalType: \"uint256\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"pure\",\n            outputs: [{ type: \"bytes32\", name: \"\", internalType: \"bytes32\" }],\n            name: \"hashUUID\",\n            inputs: [\n                { type: \"bytes32\", name: \"uuid\", internalType: \"bytes32\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"nonpayable\",\n            outputs: [],\n            name: \"mint\",\n            inputs: [\n                {\n                    type: \"bytes32[]\",\n                    name: \"contextIds\",\n                    internalType: \"bytes32[]\",\n                },\n                { type: \"uint256\", name: \"timestamp\", internalType: \"uint256\" },\n                { type: \"uint8\", name: \"v\", internalType: \"uint8\" },\n                { type: \"bytes32\", name: \"r\", internalType: \"bytes32\" },\n                { type: \"bytes32\", name: \"s\", internalType: \"bytes32\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"view\",\n            outputs: [{ type: \"string\", name: \"\", internalType: \"string\" }],\n            name: \"name\",\n            inputs: [],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"view\",\n            outputs: [{ type: \"address\", name: \"\", internalType: \"address\" }],\n            name: \"owner\",\n            inputs: [],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"view\",\n            outputs: [{ type: \"address\", name: \"\", internalType: \"address\" }],\n            name: \"ownerOf\",\n            inputs: [\n                { type: \"uint256\", name: \"tokenId\", internalType: \"uint256\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"nonpayable\",\n            outputs: [],\n            name: \"renounceOwnership\",\n            inputs: [],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"nonpayable\",\n            outputs: [],\n            name: \"rescue\",\n            inputs: [\n                {\n                    type: \"bytes32[]\",\n                    name: \"contextIds\",\n                    internalType: \"bytes32[]\",\n                },\n                { type: \"uint256\", name: \"timestamp\", internalType: \"uint256\" },\n                { type: \"uint256\", name: \"tokenId\", internalType: \"uint256\" },\n                { type: \"uint8\", name: \"v\", internalType: \"uint8\" },\n                { type: \"bytes32\", name: \"r\", internalType: \"bytes32\" },\n                { type: \"bytes32\", name: \"s\", internalType: \"bytes32\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"nonpayable\",\n            outputs: [],\n            name: \"rescue\",\n            inputs: [\n                {\n                    type: \"bytes32[]\",\n                    name: \"contextIds\",\n                    internalType: \"bytes32[]\",\n                },\n                { type: \"uint256\", name: \"timestamp\", internalType: \"uint256\" },\n                { type: \"uint256\", name: \"tokenId\", internalType: \"uint256\" },\n                { type: \"uint8\", name: \"v\", internalType: \"uint8\" },\n                { type: \"bytes32\", name: \"r\", internalType: \"bytes32\" },\n                { type: \"bytes32\", name: \"s\", internalType: \"bytes32\" },\n                { type: \"bytes\", name: \"data\", internalType: \"bytes\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"nonpayable\",\n            outputs: [],\n            name: \"setContext\",\n            inputs: [\n                { type: \"bytes32\", name: \"context\", internalType: \"bytes32\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"nonpayable\",\n            outputs: [],\n            name: \"setVerifier\",\n            inputs: [\n                { type: \"address\", name: \"verifier\", internalType: \"address\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"view\",\n            outputs: [{ type: \"bool\", name: \"\", internalType: \"bool\" }],\n            name: \"supportsInterface\",\n            inputs: [\n                { type: \"bytes4\", name: \"interfaceId\", internalType: \"bytes4\" },\n            ],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"view\",\n            outputs: [{ type: \"string\", name: \"\", internalType: \"string\" }],\n            name: \"symbol\",\n            inputs: [],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"pure\",\n            outputs: [{ type: \"string\", name: \"\", internalType: \"string\" }],\n            name: \"tokenURI\",\n            inputs: [{ type: \"uint256\", name: \"\", internalType: \"uint256\" }],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"view\",\n            outputs: [{ type: \"uint256\", name: \"\", internalType: \"uint256\" }],\n            name: \"totalSupply\",\n            inputs: [],\n        },\n        {\n            type: \"function\",\n            stateMutability: \"nonpayable\",\n            outputs: [],\n            name: \"transferOwnership\",\n            inputs: [\n                { type: \"address\", name: \"newOwner\", internalType: \"address\" },\n            ],\n        },\n    ];\n\n    web3Modal;\n\n    web3Instance;\n\n    walletAddress = \"\";\n\n    ensName = \"\";\n\n    chainId = 0;\n\n    gasBalance = 0.0;\n\n    totalSupply = 0;\n\n    maxSupply = 0;\n\n    brightIDLinkedWallets = [];\n\n    isBrightIDLinked = false;\n\n    isUUIDSigned = false;\n\n    isUUIDLinked = false;\n\n    isBoundViaContract = false;\n\n    isMintedViaContract = false;\n\n    context = \"\";\n\n    contractAddr = \"\";\n\n    mainnetRpcUrl = \"\";\n\n    walletConnectInfuraId = \"\";\n\n    relayBindURL = \"\";\n\n    relayMintURL = \"\";\n\n    appStoreAndroid = \"\";\n\n    appStoreIos = \"\";\n\n    brightIdMeetUrl = \"\";\n\n    deepLinkPrefix = \"\";\n\n    mintTokenFaucetUrl = \"\";\n\n    mintChainId = 0;\n\n    mintChainName = \"\";\n\n    mintTokenDecimal = 0;\n\n    mintTokenName = \"\";\n\n    mintBlockExplorerUrl = \"\";\n\n    mintBlockExplorerTxnPath = \"\";\n\n    mintRpcUrl = \"\";\n\n    verificationUrl = \"\";\n\n    uuid = \"\";\n\n    bindParams = null;\n\n    constructor(\n        statePrefix = \"\",\n        context = \"\",\n        contractAddr = \"\",\n        mainnetRpcUrl = \"\",\n        walletConnectInfuraId = \"\",\n        relayBindURL = \"\",\n        relayMintURL = \"\",\n        maxSupply = 0,\n        appStoreAndroid = \"https://play.google.com/store/apps/details?id=org.brightid\",\n        appStoreIos = \"https://apps.apple.com/us/app/brightid/id1428946820\",\n        brightIdMeetUrl = \"https://meet.brightid.org\",\n        deepLinkPrefix = \"brightid://link-verification/http:%2f%2fnode.brightid.org\",\n        mintTokenFaucetUrl = \"https://www.gimlu.com/faucet\",\n        mintChainId = 100,\n        mintChainName = \"Gnosis Chain (formerly xDai)\",\n        mintTokenName = \"xDAI\",\n        mintTokenDecimal = 18,\n        mintBlockExplorerUrl = \"https://blockscout.com/xdai/mainnet\",\n        mintBlockExplorerTxnPath = \"/tx/\",\n        mintRpcUrl = \"https://rpc.gnosischain.com\",\n        verificationUrl = \"https://app.brightid.org/node/v5/verifications\"\n    ) {\n        this.statePrefix = statePrefix;\n        this.context = context;\n        this.contractAddr = contractAddr;\n        this.mainnetRpcUrl = mainnetRpcUrl;\n        this.walletConnectInfuraId = walletConnectInfuraId;\n        this.relayBindURL = relayBindURL;\n        this.relayMintURL = relayMintURL;\n        this.maxSupply = maxSupply;\n\n        this.appStoreAndroid = appStoreAndroid;\n        this.appStoreIos = appStoreIos;\n        this.brightIdMeetUrl = brightIdMeetUrl;\n        this.deepLinkPrefix = deepLinkPrefix;\n        this.mintTokenFaucetUrl = mintTokenFaucetUrl;\n        this.mintChainId = Number(mintChainId);\n        this.mintChainName = mintChainName;\n        this.mintTokenDecimal = Number(mintTokenDecimal);\n        this.mintTokenName = mintTokenName;\n        this.mintBlockExplorerUrl = mintBlockExplorerUrl;\n        this.mintBlockExplorerTxnPath = mintBlockExplorerTxnPath;\n        this.mintRpcUrl = mintRpcUrl;\n        this.verificationUrl = verificationUrl;\n    }\n\n    resetWalletData() {\n        this.walletAddress = \"\";\n        this.ensName = \"\";\n        this.chainId = 0;\n        this.gasBalance = 0.0;\n        this.isBrightIDLinked = false;\n        this.isUUIDLinked = false;\n        this.isUUIDSigned = false;\n        this.isBoundViaContract = false;\n        this.isMintedViaContract = false;\n    }\n\n    /* Web3 Modal & Instances */\n    /* ---------------------------------------------------------------------- */\n\n    async initWeb3Modal() {\n        if (typeof this.web3Modal === \"object\") {\n            return;\n        }\n\n        console.log(\"initWeb3Modal\");\n\n        const providerOptions = {\n            walletconnect: {\n                package: WalletConnectProvider,\n                options: {\n                    infuraId: this.walletConnectInfuraId, // required\n                    rpc: {},\n                },\n            },\n        };\n\n        providerOptions.walletconnect.options.rpc[this.mintChainId] =\n            this.mintRpcUrl;\n\n        this.web3Modal = new Web3Modal({\n            network: \"mainnet\", // optional\n            cacheProvider: true, // optional\n            providerOptions, // required\n        });\n    }\n\n    async initInstance() {\n        if (typeof this.web3Instance === \"object\") {\n            return;\n        }\n\n        console.log(\"initInstance\");\n\n        await this.initWeb3Modal();\n\n        const web3Instance = await this.web3Modal.connect();\n\n        this.web3Instance = web3Instance;\n    }\n\n    async initFreshInstance() {\n        console.log(\"initFreshInstance\");\n\n        await this.initWeb3Modal();\n\n        await this.web3Modal.clearCachedProvider();\n        localStorage.removeItem(\"walletconnect\");\n        localStorage.removeItem(\"WALLETCONNECT_DEEPLINK_CHOICE\");\n        localStorage.removeItem(\"WEB3_CONNECT_CACHED_PROVIDER\");\n\n        const web3Instance = await this.web3Modal.connect();\n\n        this.web3Instance = web3Instance;\n    }\n\n    /* Providers */\n    /* ---------------------------------------------------------------------- */\n\n    async getProvider() {\n        await this.initInstance();\n\n        return new ethers.providers.Web3Provider(this.web3Instance);\n    }\n\n    getMainnetProvider() {\n        return new ethers.providers.JsonRpcProvider(this.mainnetRpcUrl);\n    }\n\n    getRegistrationProvider() {\n        return new ethers.providers.JsonRpcProvider(this.mintRpcUrl);\n    }\n\n    /* Contracts */\n    /* ---------------------------------------------------------------------- */\n\n    async getRegistrationProviderContract() {\n        const provider = await this.getRegistrationProvider();\n\n        return new ethers.Contract(\n            this.contractAddr,\n            this.contractAbi,\n            provider\n        );\n    }\n\n    async getRegistrationProviderContractRw() {\n        const provider = await this.getRegistrationProvider();\n\n        return new ethers.Contract(\n            this.contractAddr,\n            this.contractAbi,\n            provider.getSigner()\n        );\n    }\n\n    async getContract() {\n        const provider = await this.getProvider();\n\n        return new ethers.Contract(\n            this.contractAddr,\n            this.contractAbi,\n            provider\n        );\n    }\n\n    async getContractRw() {\n        const provider = await this.getProvider();\n\n        return new ethers.Contract(\n            this.contractAddr,\n            this.contractAbi,\n            provider.getSigner()\n        );\n    }\n\n    /* Provider Feature Detection */\n    /* ---------------------------------------------------------------------- */\n\n    getProviderType() {\n        return JSON.parse(localStorage.getItem(\"WEB3_CONNECT_CACHED_PROVIDER\"));\n    }\n\n    canAutoSwitchNetworks() {\n        return this.getProviderType() !== \"walletconnect\";\n    }\n\n    hasReconnectableWallet() {\n        return (\n            this.getProviderType() === \"injected\" ||\n            this.getProviderType() === \"walletconnect\"\n        );\n    }\n\n    /* Data Query */\n    /* ---------------------------------------------------------------------- */\n\n    async getWalletAddress() {\n        if (\n            typeof this.walletAddress === \"string\" &&\n            this.walletAddress !== \"\"\n        ) {\n            return this.walletAddress;\n        }\n\n        console.log(\"getWalletAddress\");\n\n        this.walletAddress = await this.queryWalletAddress();\n\n        return this.walletAddress;\n    }\n\n    async getQrCodeUrl() {\n        const addr = await this.getWalletAddress();\n\n        return `${this.deepLinkPrefix}/${this.context}/${addr}`;\n    }\n\n    async getQrCodeUUIDUrl() {\n        return `${this.deepLinkPrefix}/${this.context}/${this.uuid}`;\n    }\n\n    async queryWalletAddress() {\n        try {\n            console.log(\"queryWalletAddress\");\n\n            const provider = await this.getProvider();\n\n            const accounts = await provider.listAccounts();\n\n            if (accounts.length === 0) {\n                throw new Error(\"No Wallet Address Found\");\n            }\n\n            return accounts[0];\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            return \"\";\n        }\n    }\n\n    async queryENSName() {\n        try {\n            console.log(\"queryENSName\");\n\n            const addr = await this.getWalletAddress();\n\n            const provider = this.getMainnetProvider();\n\n            const name = await provider.lookupAddress(addr);\n\n            // console.log(name);\n\n            return name;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            return \"\";\n        }\n    }\n\n    async queryChainId() {\n        try {\n            console.log(\"queryChainId\");\n\n            const provider = await this.getProvider();\n\n            const { chainId } = await provider.getNetwork();\n\n            return chainId;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            return 0;\n        }\n    }\n\n    async queryGasBalance() {\n        try {\n            console.log(\"checkGas\");\n\n            const addr = await this.getWalletAddress();\n\n            const provider = await this.getRegistrationProvider();\n\n            const balanceRaw = await provider.getBalance(addr);\n\n            const balanceFormatted = await ethers.utils.formatEther(balanceRaw);\n\n            return parseFloat(balanceFormatted);\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            return 0.0;\n        }\n    }\n\n    async queryTotalSupply() {\n        try {\n            console.log(\"queryTotalSupply\");\n\n            const contract = await this.getRegistrationProviderContract();\n\n            const totalSupply = await contract.totalSupply();\n\n            const totalSupplyDecimal = totalSupply.toString();\n\n            // console.log(totalSupply);\n            // console.log(totalSupplyDecimal);\n\n            return totalSupplyDecimal;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            return 0;\n        }\n    }\n\n    async queryBrightIDLink(contextId) {\n        try {\n            console.log(\"queryBrightIDLink\");\n\n            const userVerificationUrl = `${this.verificationUrl}/${this.context}/${contextId}?signed=null&timestamp=null`;\n\n            // console.log(userVerificationUrl);\n\n            const request = new Request(userVerificationUrl, {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json; charset=utf-8\",\n                },\n            });\n\n            const response = await fetch(request);\n\n            // console.log(response);\n\n            if (response.ok === true) {\n                const responseJson = await response.json();\n\n                // console.log(responseJson);\n\n                return (\n                    responseJson.data.contextIds[0].toLowerCase() ===\n                    contextId.toLowerCase()\n                );\n\n                // return true; // DEBUG\n            }\n\n            if (response.status === 403) {\n                return true;\n            }\n\n            return false;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            return false;\n        }\n    }\n\n    async queryBrightIDSponsorship(contextId) {\n        try {\n            console.log(\"queryBrightIDSponsorship\");\n\n            const userVerificationUrl = `${this.verificationUrl}/${this.context}/${contextId}?signed=eth&timestamp=seconds`;\n\n            // console.log(userVerificationUrl);\n\n            const request = new Request(userVerificationUrl, {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json; charset=utf-8\",\n                },\n            });\n\n            const response = await fetch(request);\n\n            // console.log(response);\n\n            return response.ok;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            return false;\n        }\n    }\n\n    async queryTokenBalance() {\n        try {\n            console.log(\"queryTokenBalance\");\n\n            const addr = await this.getWalletAddress();\n\n            const contract = await this.getRegistrationProviderContract();\n\n            const balance = await contract.balanceOf(addr);\n\n            // console.log(balance);\n\n            return balance;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            return 0;\n        }\n    }\n\n    async queryBrightIDSignature(contextId) {\n        try {\n            const userVerificationUrl = `${this.verificationUrl}/${this.context}/${contextId}?signed=eth&timestamp=seconds`;\n\n            // console.log(userVerificationUrl);\n\n            const request = new Request(userVerificationUrl, {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json; charset=utf-8\",\n                },\n            });\n\n            const response = await fetch(request);\n\n            const body = await response.json();\n\n            if (response.ok === false) {\n                throw new Error(body.errorMessage);\n            }\n\n            return body;\n        } catch (e) {\n            throw new Error(e.message);\n        }\n    }\n\n    /* State Data Query */\n    /* ---------------------------------------------------------------------- */\n\n    async initWalletAddress() {\n        try {\n            console.log(\"initWalletAddress\");\n\n            this.walletAddress = await this.queryWalletAddress();\n\n            return this.walletAddress;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async initENSName() {\n        try {\n            this.ensName = await this.queryENSName();\n\n            return this.ensName;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async initChainId() {\n        try {\n            this.chainId = await this.queryChainId();\n\n            return this.chainId;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async initGasBalance() {\n        try {\n            this.gasBalance = await this.queryGasBalance();\n\n            return this.gasBalance;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    async initTotalSupply() {\n        try {\n            this.totalSupply = await this.queryTotalSupply();\n\n            // this.totalSupply = 0; // DEBUG\n\n            return this.totalSupply;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n        }\n    }\n\n    // -------------------------------------------------------------------------\n\n    setCachedUUID(uuid) {\n        sessionStorage.setItem(`${this.statePrefix}-uuid`, uuid);\n    }\n\n    getCachedUUID() {\n        return sessionStorage.getItem(`${this.statePrefix}-uuid`);\n    }\n\n    removeCachedUUID() {\n        sessionStorage.removeItem(`${this.statePrefix}-uuid`);\n    }\n\n    hasCachedUUID() {\n        const uuid = this.getCachedUUID();\n\n        return uuid !== null && uuid !== \"\";\n    }\n\n    restoreCachedUUID() {\n        const uuid = this.getCachedUUID();\n\n        this.uuid = uuid;\n    }\n\n    // -------------------------------------------------------------------------\n\n    setCachedSignedUUID(bindParams) {\n        const bindParamJson = JSON.stringify(bindParams);\n\n        sessionStorage.setItem(\n            `${this.statePrefix}-uuid-bind-params`,\n            bindParamJson\n        );\n    }\n\n    getCachedSignedUUID() {\n        return sessionStorage.getItem(`${this.statePrefix}-uuid-bind-params`);\n    }\n\n    removeCachedSignedUUID() {\n        sessionStorage.removeItem(`${this.statePrefix}-uuid-bind-params`);\n    }\n\n    hasCachedSignedUUID() {\n        const paramsString = this.getCachedSignedUUID();\n\n        return paramsString !== null && paramsString !== \"\";\n    }\n\n    restoreCachedSignedUUID() {\n        const paramsString = this.getCachedSignedUUID();\n\n        const params = JSON.parse(paramsString);\n\n        this.bindParams = params;\n    }\n\n    // -------------------------------------------------------------------------\n\n    hasUUID() {\n        return this.uuid !== null && this.uuid !== \"\";\n    }\n\n    hasSignedUUID() {\n        return (\n            this.bindParams !== null &&\n            typeof this.bindParams.addr !== \"undefined\" &&\n            typeof this.bindParams.uuidHash !== \"undefined\" &&\n            typeof this.bindParams.nonce !== \"undefined\" &&\n            typeof this.bindParams.signature !== \"undefined\" &&\n            this.bindParams.addr !== \"\" &&\n            this.bindParams.uuidHash !== \"\" &&\n            this.bindParams.nonce !== \"\" &&\n            this.bindParams.signature !== \"\"\n        );\n    }\n\n    async hasBoundUUID() {\n        if (this.hasUUID() === false || this.hasSignedUUID() === false) {\n            return false;\n        }\n\n        const addr = await this.queryWalletAddress();\n\n        const uuidHash = await this.hashUUID(this.uuid);\n\n        const bindParams = await this.getBindParams();\n\n        if (bindParams.addr !== addr || bindParams.uuidHash !== uuidHash) {\n            return false;\n        }\n\n        const provider = await this.getRegistrationProvider();\n        const contract = await this.getContract();\n\n        let filter = contract.filters.AddressBound(bindParams.addr);\n\n        filter.fromBlock = 21019766;\n        filter.toBlock = \"latest\";\n\n        const abi = [\n            \"function bind(address owner, bytes32 uuidHash, uint256 nonce, bytes signature)\",\n        ];\n\n        const iface = new ethers.utils.Interface(abi);\n\n        const logs = await provider.getLogs(filter);\n        // console.log(logs);\n\n        const logsReversed = logs.reverse();\n\n        for (let log of logsReversed) {\n            const receipt = await provider.getTransactionReceipt(\n                log.transactionHash\n            );\n            // console.log(receipt);\n\n            const txn = await provider.getTransaction(log.transactionHash);\n            // console.log(txn);\n\n            const parsed = iface.parseTransaction(txn);\n            // console.log(parsed);\n\n            // console.log(bindParams.addr);\n            // console.log(parsed.args[0]);\n\n            // console.log(bindParams.uuidHash);\n            // console.log(parsed.args[1]);\n\n            if (\n                receipt.blockNumber &&\n                Number(receipt.status) === 1 &&\n                bindParams.addr === parsed.args[0] &&\n                bindParams.uuidHash === parsed.args[1]\n            ) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    // -------------------------------------------------------------------------\n\n    async initUUID() {\n        try {\n            const walletAddress = await this.queryWalletAddress();\n\n            if (\n                sessionStorage.getItem(`${this.statePrefix}-wallet`) !==\n                walletAddress\n            ) {\n                sessionStorage.setItem(\n                    `${this.statePrefix}-wallet`,\n                    walletAddress\n                );\n\n                return await this.resetAndInitNewUUID();\n            }\n\n            this.restoreUUID();\n\n            if (this.hasUUID() === false) {\n                return await this.resetAndInitNewUUID();\n            }\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n            return await this.resetAndInitNewUUID();\n        }\n    }\n\n    async restoreUUID() {\n        this.restoreCachedUUID();\n        this.restoreCachedSignedUUID();\n    }\n\n    async resetUUID() {\n        this.removeCachedUUID();\n        this.removeCachedSignedUUID();\n        this.uuid = \"\";\n        this.bindParams = null;\n    }\n\n    async initNewUUID() {\n        this.uuid = this.generateUUID();\n\n        this.setCachedUUID(this.uuid);\n    }\n\n    async resetAndInitNewUUID() {\n        await this.resetUUID();\n        await this.initNewUUID();\n    }\n\n    generateUUID() {\n        // if (typeof crypto !== \"undefined\") {\n        //     console.log(\"crypto.randomUUID\");\n        //     return crypto.randomUUID().replaceAll(\"-\", \"\");\n        // }\n\n        const number = ethers.BigNumber.from(ethers.utils.randomBytes(16));\n        const uuid = number.toHexString().replaceAll(\"0x\", \"\");\n\n        return uuid;\n    }\n\n    strToByte32(str) {\n        return \"0x\" + new Buffer(str).toString(\"hex\");\n    }\n\n    async hashUUID(uuid) {\n        const contract = await this.getRegistrationProviderContract();\n\n        const uuidByte32 = this.strToByte32(uuid);\n\n        const uuidHash = await contract.hashUUID(uuidByte32);\n\n        return uuidHash;\n    }\n\n    // -------------------------------------------------------------------------\n\n    async initIsUUIDLinked() {\n        try {\n            this.isUUIDLinked = await this.queryBrightIDLink(this.uuid);\n\n            // this.isUUIDLinked = true; // DEBUG\n\n            return this.isUUIDLinked;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            this.isUUIDLinked = false;\n\n            return this.isUUIDLinked;\n        }\n    }\n\n    async initIsUUIDSigned() {\n        try {\n            this.isUUIDSigned = this.hasSignedUUID();\n\n            // this.isUUIDSigned = true; // DEBUG\n\n            return this.isUUIDSigned;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            this.isUUIDSigned = false;\n\n            return this.isUUIDSigned;\n        }\n    }\n\n    async initIsBoundViaContract() {\n        try {\n            this.isBoundViaContract = await this.hasBoundUUID();\n\n            // this.isBoundViaContract = true; // DEBUG\n\n            return this.isBoundViaContract;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            this.isBoundViaContract = false;\n\n            return this.isBoundViaContract;\n        }\n    }\n\n    async initIsMintedViaContract() {\n        try {\n            const balance = await this.queryTokenBalance();\n\n            this.isMintedViaContract = balance > 0;\n\n            // this.isMintedViaContract = false; // DEBUG\n\n            return this.isMintedViaContract;\n        } catch (e) {\n            // console.error(e);\n            // console.log(e);\n\n            this.isMintedViaContract = false;\n\n            return this.isMintedViaContract;\n        }\n    }\n\n    /* Interactive Events */\n    /* ---------------------------------------------------------------------- */\n\n    async connectWallet() {\n        await this.initInstance();\n    }\n\n    async chooseWallet() {\n        await this.initFreshInstance();\n    }\n\n    async switchToMainnetNetwork() {\n        const provider = await this.getProvider();\n\n        return await provider.provider.request({\n            method: \"wallet_switchEthereumChain\",\n            params: [{ chainId: \"0x1\" }],\n        });\n    }\n\n    async switchToMintNetwork() {\n        const mintHexChainId = ethers.utils.hexlify(Number(this.mintChainId));\n\n        const provider = await this.getProvider();\n\n        return await provider.provider.request({\n            method: \"wallet_switchEthereumChain\",\n            params: [{ chainId: mintHexChainId }],\n        });\n    }\n\n    async addMintNetwork() {\n        const mintHexChainId = ethers.utils.hexlify(Number(this.mintChainId));\n\n        const provider = await this.getProvider();\n\n        return await provider.provider.request({\n            method: \"wallet_addEthereumChain\",\n            params: [\n                {\n                    chainId: mintHexChainId,\n                    chainName: this.mintChainName,\n                    nativeCurrency: {\n                        name: this.mintTokenName,\n                        symbol: this.mintTokenName,\n                        decimals: this.mintTokenDecimal,\n                    },\n                    rpcUrls: [this.mintRpcUrl],\n                    blockExplorerUrls: [this.mintBlockExplorerUrl],\n                    // iconUrls: [this.mintIconUrl],\n                },\n            ],\n        });\n    }\n\n    standardizeSignature(signature) {\n        if (signature.slice(-2) === \"00\") {\n            return signature.slice(0, -2) + \"1b\";\n        }\n\n        if (signature.slice(-2) === \"01\") {\n            return signature.slice(0, -2) + \"1c\";\n        }\n\n        return signature;\n    }\n\n    async signBindParams() {\n        const contract = await this.getRegistrationProviderContract();\n        const provider = await this.getProvider();\n\n        const addr = await this.getWalletAddress();\n        // console.log(\"Wallet Address\");\n        // console.log(addr);\n\n        const uuidHash = await this.hashUUID(this.uuid);\n        // console.log(\"UUID Hash\");\n        // console.log(uuidHash);\n\n        const nonceBytes = ethers.utils.randomBytes(3);\n        const nonce = new Buffer(nonceBytes).readUIntBE(0, nonceBytes.length);\n        // console.log(\"nonce\");\n        // console.log(nonceBytes);\n        // console.log(nonce);\n\n        const hashToSign = await contract.getUUIDHash(addr, uuidHash, nonce);\n        // console.log(\"getUUIDHash\");\n        // console.log(hashToSign);\n\n        const bytesDataHash = ethers.utils.arrayify(hashToSign);\n        const rawSignature = await provider\n            .getSigner()\n            .signMessage(bytesDataHash);\n\n        const signature = this.standardizeSignature(rawSignature);\n        // console.log(\"signMessage\");\n        // console.log(rawSignature);\n        // console.log(signature);\n\n        // console.log(\"pass to bind\");\n        // console.log(\"--------------------------\");\n        // console.log(addr);\n        // console.log(uuidHash);\n        // console.log(nonce);\n        // console.log(signature);\n        // console.log(\"--------------------------\");\n\n        this.bindParams = {\n            addr,\n            uuidHash,\n            nonce,\n            signature,\n        };\n\n        this.setCachedSignedUUID(this.bindParams);\n\n        return this.bindParams;\n    }\n\n    async getBindParams() {\n        return this.bindParams;\n    }\n\n    async getMintParams() {\n        const verificationData = await this.queryBrightIDSignature(this.uuid);\n\n        const contextIds = verificationData.data.contextIds;\n        const timestamp = verificationData.data.timestamp;\n        const v = verificationData.data.sig.v;\n        const r = \"0x\" + verificationData.data.sig.r;\n        const s = \"0x\" + verificationData.data.sig.s;\n\n        const contextIdsByte32 = contextIds.map((contextId) => {\n            return this.strToByte32(contextId);\n        });\n\n        // console.log(\"pass to mint\");\n        // console.log(\"-------------------------------\");\n        // console.log(contextIds);\n        // console.log(contextIdsByte32);\n        // console.log(timestamp);\n        // console.log(v);\n        // console.log(r);\n        // console.log(s);\n        // console.log(\"-------------------------------\");\n\n        return {\n            contextIds,\n            contextIdsByte32,\n            timestamp,\n            v,\n            r,\n            s,\n        };\n    }\n\n    async getTokenId(addr) {\n        const provider = await this.getRegistrationProvider();\n        const contract = await this.getContract();\n\n        let filter = contract.filters.Transfer(null, addr);\n        // filter.fromBlock = 0;\n        filter.fromBlock = 21019766;\n\n        const logs = await provider.getLogs(filter);\n\n        if (logs.length === 0) {\n            throw new Error(\n                \"No NFTs could be found at the provided rescue address.\"\n            );\n        }\n\n        const lastLog = logs.pop();\n\n        const tokenIdHex = lastLog.topics[3];\n\n        const tokenId = parseInt(tokenIdHex, 16);\n\n        // console.log(lastLog);\n        // console.log(tokenIdHex);\n        // console.log(tokenId);\n\n        return tokenId;\n    }\n\n    async getRescueParams(rescueFrom) {\n        const tokenId = await this.getTokenId(rescueFrom);\n\n        const verificationData = await this.queryBrightIDSignature(this.uuid);\n\n        const contextIds = verificationData.data.contextIds;\n        const timestamp = verificationData.data.timestamp;\n        const v = verificationData.data.sig.v;\n        const r = \"0x\" + verificationData.data.sig.r;\n        const s = \"0x\" + verificationData.data.sig.s;\n\n        const contextIdsByte32 = contextIds.map((contextId) => {\n            return this.strToByte32(contextId);\n        });\n\n        // console.log(\"pass to mint\");\n        // console.log(\"-------------------------------\");\n        // console.log(contextIds);\n        // console.log(contextIdsByte32);\n        // console.log(timestamp);\n        // console.log(v);\n        // console.log(r);\n        // console.log(s);\n        // console.log(\"-------------------------------\");\n\n        return {\n            contextIds,\n            contextIdsByte32,\n            timestamp,\n            tokenId,\n            v,\n            r,\n            s,\n        };\n    }\n\n    async getMintRelayParams() {\n        const addr = await this.getWalletAddress();\n        const uuid = this.uuid;\n\n        // console.log(\"pass to mint relay\");\n        // console.log(\"-------------------------------\");\n        // console.log(addr);\n        // console.log(uuid);\n        // console.log(\"-------------------------------\");\n\n        return {\n            addr,\n            uuid,\n        };\n    }\n\n    async bindViaTransaction() {\n        const chainId = await this.initChainId();\n\n        if (chainId !== Number(this.mintChainId)) {\n            throw new Error(\n                `Please switch to \"${this.mintChainName}\" (chainId: ${this.mintChainId})`\n            );\n        }\n\n        const bindParams = await this.getBindParams();\n\n        const contract = await this.getContractRw();\n\n        return await contract.bind(\n            bindParams.addr,\n            bindParams.uuidHash,\n            bindParams.nonce,\n            bindParams.signature\n        );\n    }\n\n    async mintViaTransaction() {\n        const chainId = await this.initChainId();\n\n        if (chainId !== Number(this.mintChainId)) {\n            throw new Error(\n                `Please switch to the ${this.mintChainName} network (chainId: ${this.mintChainId}) first.`\n            );\n        }\n\n        const mintParams = await this.getMintParams();\n\n        const contract = await this.getContractRw();\n\n        return await contract.mint(\n            mintParams.contextIdsByte32,\n            mintParams.timestamp,\n            mintParams.v,\n            mintParams.r,\n            mintParams.s\n        );\n    }\n\n    async rescueViaTransaction(rescueFrom) {\n        const chainId = await this.initChainId();\n\n        if (chainId !== Number(this.mintChainId)) {\n            throw new Error(\n                `Please switch to the ${this.mintChainName} network (chainId: ${this.mintChainId}) first.`\n            );\n        }\n\n        const rescueParams = await this.getRescueParams(rescueFrom);\n\n        const contract = await this.getContractRw();\n\n        return await contract[\n            \"rescue(bytes32[],uint256,uint256,uint8,bytes32,bytes32)\"\n        ](\n            rescueParams.contextIdsByte32,\n            rescueParams.timestamp,\n            rescueParams.tokenId,\n            rescueParams.v,\n            rescueParams.r,\n            rescueParams.s\n        );\n    }\n\n    async bindViaRelay() {\n        const bindParams = await this.getBindParams();\n\n        const request = new Request(this.relayBindURL, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json; charset=utf-8\",\n            },\n            body: JSON.stringify(bindParams),\n        });\n\n        return await fetch(request);\n    }\n\n    async mintViaRelay() {\n        const mintParams = await this.getMintRelayParams();\n\n        const request = new Request(this.relayMintURL, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json; charset=utf-8\",\n            },\n            body: JSON.stringify(mintParams),\n        });\n\n        return await fetch(request);\n    }\n\n    async rescueViaRelay(rescueFrom) {\n        throw new Error(\"Not implemented\");\n    }\n\n    getSignErrorMessage(error) {\n        const errorMessage = this.getErrorMessage(error);\n\n        return this.decodeErrorMessage(errorMessage);\n    }\n\n    getBindErrorMessage(error) {\n        const errorMessage = this.getErrorMessage(error);\n\n        return this.decodeErrorMessage(errorMessage);\n    }\n\n    getMintErrorMessage(error) {\n        const errorMessage = this.getErrorMessage(error);\n\n        return this.decodeErrorMessage(errorMessage);\n    }\n\n    decodeErrorMessage(errorMessage) {\n        if (errorMessage.slice(0, 9) === \"Reverted \") {\n            const errorCode = errorMessage.slice(9);\n\n            const decodedMessage = ethers.utils.toUtf8String(errorCode);\n\n            return decodedMessage;\n        }\n\n        return errorMessage;\n    }\n\n    getErrorMessage(error) {\n        if (\n            typeof error.data !== \"undefined\" &&\n            typeof error.data.message !== \"undefined\" &&\n            error.data.message.slice(0, 9) === \"Reverted \"\n        ) {\n            return error.data.message;\n        }\n\n        if (typeof error.message !== \"undefined\") {\n            return error.message;\n        }\n\n        return error;\n    }\n\n    getIsUUIDAlreadyBoundError(error) {\n        const errorMessage = this.getBindErrorMessage(error);\n\n        return errorMessage.includes(\"UUID already bound\");\n    }\n\n    getIsUUIDUnboundError(error) {\n        const errorMessage = this.getMintErrorMessage(error);\n\n        // return errorMessage.includes(\"This BrightID had minted\"); // DEBUG\n\n        return errorMessage.includes(\"balance query for the zero address\");\n    }\n}\n\nexport default BrightIDNftMintModel;\n"],"sourceRoot":""}